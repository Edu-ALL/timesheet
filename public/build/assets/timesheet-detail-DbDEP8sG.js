import{_ as ye}from"./DeleteHandler.vue_vue_type_script_setup_true_lang-BRLqDJwM.js";import{r as y,l as J,o as D,f as j,w as a,b as e,Z as ie,W as B,u as t,v as F,Y as P,V as k,j as x,m as ne,A as Y,s as S,$ as oe,e as de,a as l,x as K,c as O,X as he,F as be,t as V,z as Ve,h as fe,k as le,a0 as ke,i as we,P as xe,a1 as De,a2 as $e,a3 as ge}from"./main-V6DLgQSQ.js";import{r as L}from"./rules-B5G8qOzK.js";import{a as A,c as re,V as E,b as H,d as se,e as Ce}from"./VCard-1O7BfnZG.js";import{V as ue}from"./VForm-BfUXGYT6.js";import{V as W,a as $}from"./VRow-DEagsZQU.js";import{V as pe}from"./VTextarea-Bzf2aGRj.js";import{V as G}from"./VDialog-D8fLJU4L.js";import{a as _e,V as Q}from"./VTable-B6aZPvxq.js";import{T as ee}from"./index-CR_A_32Z.js";import{V as Te}from"./VCheckbox-BsxtsJx_.js";import{V as te}from"./VAutocomplete-CI1hbvyS.js";import{V as Me}from"./VDivider-DIWQFXL-.js";import{V as Se,a as ae,b as Ue}from"./VList-B-wF7jq6.js";import"./VAvatar-BCgseUPF.js";import"./VImg-eNcPlUr5.js";import"./VTooltip-CnBLM2bm.js";import"./VCheckboxBtn-D_3HW7TN.js";import"./VSelectionControl-CDZrxb1i.js";import"./VSlideGroup-CPn1JMxJ.js";import"./ssrBoot-nx0VtJLV.js";const je={__name:"activity-add",props:{id:String},emits:["close","reload"],setup(q,{emit:M}){const p=q,r=M,C=y(),m=y({activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}),d=()=>{m.value={activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}},v=async()=>{const{valid:w}=await C.value.validate();if(w)try{const i=await Y.post("api/v1/timesheet/"+p.id+"/activity",m.value);i&&S("success",i.message,"bottom-end")}catch(i){S("error",i.response.data.errors,"bottom-end")}finally{d(),r("reload"),r("close")}};return(w,i)=>{const f=J("DialogCloseBtn"),h=J("VDateInput");return D(),j(E,{title:"New Activity"},{default:a(()=>[e(f,{variant:"text",size:"default",onClick:i[0]||(i[0]=s=>r("close"))}),e(A,null,{default:a(()=>[e(ue,{onSubmit:ie(v,["prevent"]),ref_key:"formData",ref:C,"validate-on":"input"},{default:a(()=>[e(W,null,{default:a(()=>[e($,{cols:"12",class:"d-none"},{default:a(()=>[e(B,{modelValue:t(m).activity,"onUpdate:modelValue":i[1]||(i[1]=s=>t(m).activity=s),label:"Activity Name",placeholder:"Activity",variant:"solo"},null,8,["modelValue"])]),_:1}),e($,{cols:"12"},{default:a(()=>[e(pe,{modelValue:t(m).description,"onUpdate:modelValue":i[2]||(i[2]=s=>t(m).description=s),label:"Meeting Discussion",placeholder:"Meeting Discussion",variant:"solo",rules:t(L).required},null,8,["modelValue","rules"])]),_:1}),e($,{md:"6",cols:"12"},{default:a(()=>[e(h,{modelValue:t(m).date,"onUpdate:modelValue":i[3]||(i[3]=s=>t(m).date=s),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(L).required},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(B,{type:"time",modelValue:t(m).start_time,"onUpdate:modelValue":i[4]||(i[4]=s=>t(m).start_time=s),label:"Start Time",placeholder:"Start Time",rules:t(L).required,variant:"solo",class:"mb-3",onChange:i[5]||(i[5]=s=>t(m).start_date=t(F)(t(m).date).format("YYYY-MM-DD")+" "+t(m).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(B,{type:"time",modelValue:t(m).end_time,"onUpdate:modelValue":i[6]||(i[6]=s=>t(m).end_time=s),label:"End Time",placeholder:"End Time",variant:"solo",onChange:i[7]||(i[7]=s=>t(m).end_date=t(F)(t(m).date).format("YYYY-MM-DD")+" "+t(m).end_time+":00")},null,8,["modelValue"])]),_:1}),e($,{md:"12",cols:"12"},{default:a(()=>[e(B,{type:"text",modelValue:t(m).meeting_link,"onUpdate:modelValue":i[8]||(i[8]=s=>t(m).meeting_link=s),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(L).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(re,{class:"mt-5"},{default:a(()=>[e(P,{type:"button",color:"error",onClick:i[9]||(i[9]=s=>r("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{type:"submit",color:"success"},{default:a(()=>[x(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Ye={__name:"activity-edit",props:{timesheet_id:Number,activity:String},emits:["close","reload"],setup(q,{emit:M}){const p=y(),r=q,C=M,m=oe("updateReload"),d=y({activity:r==null?void 0:r.activity.activity,description:r==null?void 0:r.activity.description,date:new Date(r==null?void 0:r.activity.start_date),start_time:r==null?void 0:r.activity.start_time,end_time:r==null?void 0:r.activity.end_time,start_date:F(r==null?void 0:r.activity.start_date).format("YYYY-MM-DD")+" "+(r==null?void 0:r.activity.start_time)+":00",end_date:(r==null?void 0:r.activity.end_time)!=0?F(r==null?void 0:r.activity.start_date).format("YYYY-MM-DD")+" "+(r==null?void 0:r.activity.end_time)+":00":null,meeting_link:r==null?void 0:r.activity.meeting_link}),v=async()=>{var i,f;const{valid:w}=await p.value.validate();if(w)try{const h=await Y.put("api/v1/timesheet/"+r.timesheet_id+"/activity/"+r.activity.id,d.value);h&&(S("success",h.message,"bottom-end"),C("reload"))}catch(h){if((f=(i=h==null?void 0:h.response)==null?void 0:i.data)!=null&&f.errors){const s=h.response.data.errors;let _="Validation errors:";if(typeof s!="string"){for(const o in s)s.hasOwnProperty(o)&&(_+=`
${o}: ${s[o].join(", ")}`);S("error",_,"bottom-end")}else S("error",h.response.data.errors,"bottom-end")}}finally{C("close"),setTimeout(()=>{m(!0)},3e3)}};return(w,i)=>{const f=J("DialogCloseBtn"),h=J("VDateInput");return D(),j(E,{title:"Edit Activity"},{default:a(()=>[e(f,{variant:"text",size:"default",onClick:i[0]||(i[0]=s=>C("close"))}),e(A,null,{default:a(()=>[e(ue,{onSubmit:ie(v,["prevent"]),ref_key:"formData",ref:p,"validate-on":"input"},{default:a(()=>[e(W,null,{default:a(()=>[e($,{cols:"12",class:"d-none"},{default:a(()=>[e(B,{modelValue:t(d).activity,"onUpdate:modelValue":i[1]||(i[1]=s=>t(d).activity=s),label:"Activity Name",placeholder:"Activity",variant:"solo"},null,8,["modelValue"])]),_:1}),e($,{cols:"12"},{default:a(()=>[e(pe,{modelValue:t(d).description,"onUpdate:modelValue":i[2]||(i[2]=s=>t(d).description=s),label:"Meeting Discussion",rules:t(L).required,placeholder:"Meeting Discussion",variant:"solo"},null,8,["modelValue","rules"])]),_:1}),e($,{md:"6",cols:"12"},{default:a(()=>[e(h,{modelValue:t(d).date,"onUpdate:modelValue":i[3]||(i[3]=s=>t(d).date=s),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(L).required},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(B,{type:"time",modelValue:t(d).start_time,"onUpdate:modelValue":i[4]||(i[4]=s=>t(d).start_time=s),label:"Start Time",rules:t(L).required,placeholder:"Start Time",variant:"solo",onChange:i[5]||(i[5]=s=>t(d).start_date=t(F)(r==null?void 0:r.activity.date).format("YYYY-MM-DD")+" "+t(d).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e($,{md:"3",cols:"6"},{default:a(()=>[e(B,{type:"time",modelValue:t(d).end_time,"onUpdate:modelValue":i[6]||(i[6]=s=>t(d).end_time=s),label:"End Time",placeholder:"End Time",variant:"solo",onChange:i[7]||(i[7]=s=>t(d).end_date=t(F)(r==null?void 0:r.activity.date).format("YYYY-MM-DD")+" "+t(d).end_time+":00")},null,8,["modelValue"])]),_:1}),e($,{md:"12",cols:"12"},{default:a(()=>[e(B,{type:"text",modelValue:t(d).meeting_link,"onUpdate:modelValue":i[8]||(i[8]=s=>t(d).meeting_link=s),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(L).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(re,{class:"mt-5"},{default:a(()=>[e(P,{color:"error",onClick:i[9]||(i[9]=s=>C("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[x(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Pe={class:"d-flex justify-between align-center"},Le=l("div",{class:"w-100"},[l("h4",null,"Activity")],-1),qe=l("thead",null,[l("tr",null,[l("th",{class:"text-uppercase",width:"1%"}," No "),l("th",{class:"text-uppercase text-center"},"Meeting Discussion"),l("th",{class:"text-uppercase text-center"},"Date"),l("th",{class:"text-uppercase text-center"},"Start Time"),l("th",{class:"text-uppercase text-center"},"End Time"),l("th",{class:"text-uppercase text-center"},"Time Spent"),l("th",{class:"text-uppercase text-center"},"Status"),l("th",{class:"text-uppercase text-end"},"#")])],-1),Ne={width:"1%"},Ae={class:"d-none"},Be={class:"text-start"},Ee={class:"text-center"},Re={class:"text-center"},Ie={class:"text-center"},ze={class:"text-end"},Oe=["href"],Fe={__name:"timesheet-detail",props:{id:String},setup(q){const M=q,p=oe("updateReload"),r=y([]),C=y(!1),m=y([{add:!1,edit:!1,delete:!1}]),d=y([]),v=async()=>{C.value=!0;try{const s=await Y.get("api/v1/timesheet/"+M.id+"/activities");s&&(r.value=s)}catch(s){console.error(s)}finally{C.value=!1}},w=s=>{m.value[s]?m.value[s]=!1:m.value[s]=!0},i=(s,_)=>{d.value=_,w(s)},f=async()=>{var s,_,o;try{const c=await Y.delete("api/v1/timesheet/"+M.id+"/activity/"+d.value.id);c&&(S("success",c.message,"bottom-end"),w("delete"))}catch(c){((s=c.response)==null?void 0:s.status)==400&&S("error",(o=(_=c.response)==null?void 0:_.data)==null?void 0:o.errors,"bottom-end")}finally{v(),p(!0)}},h=async s=>{var _,o;try{const c=await Y.patch("api/v1/timesheet/"+M.id+"/activity/"+s.id,s);c&&S("success",c.message,"bottom-end")}catch(c){if((o=(_=c==null?void 0:c.response)==null?void 0:_.data)!=null&&o.errors){const n=c.response.data.errors;let u="Validation errors:";if(typeof n!="string"){for(const b in n)n.hasOwnProperty(b)&&(u+=`
${b}: ${n[b].join(", ")}`);S("error",u,"bottom-end")}else S("error",c.response.data.errors,"bottom-end")}}finally{v(),p(!0)}};return de(()=>{v()}),(s,_)=>(D(),j(E,null,{default:a(()=>[e(H,null,{default:a(()=>[l("div",Pe,[Le,K((D(),j(P,{onClick:_[0]||(_[0]=o=>w("add"))},{default:a(()=>[e(k,{icon:"ri-add-line"})]),_:1})),[[ee,"New Activity","start"]]),e(G,{modelValue:t(m).add,"onUpdate:modelValue":_[2]||(_[2]=o=>t(m).add=o),"max-width":"600",persistent:""},{default:a(()=>[e(je,{id:M.id,onClose:_[1]||(_[1]=o=>w("add")),onReload:v},null,8,["id"])]),_:1},8,["modelValue"])])]),_:1}),e(A,null,{default:a(()=>[t(C)?(D(),j(Q,{key:1,type:"table"})):(D(),j(_e,{key:0,class:"text-no-wrap",height:"400","fixed-header":""},{default:a(()=>[qe,l("tbody",null,[(D(!0),O(be,null,he(t(r),(o,c)=>(D(),O("tr",{key:c},[l("td",Ne,V(c+1),1),l("td",Ae,V(o.activity),1),l("td",Be,V(o.description),1),l("td",null,V(s.$moment(o.start_date).format("dddd"))+", "+V(s.$moment(o.start_date).format("MMM Do YYYY")),1),l("td",Ee,V(o.start_time),1),l("td",Re,V(o.end_time),1),l("td",Ie,[e(k,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),x(" "+V(o.estimate)+" Minutes ",1)]),l("td",null,[K(e(Te,{color:"success",modelValue:o.status,"onUpdate:modelValue":[n=>o.status=n,n=>h(o)],value:"1","false-value":0},null,8,["modelValue","onUpdate:modelValue"]),[[ee,o.status?"Completed":"Not Yet","start"]])]),l("td",ze,[e(P,{color:"primary",density:"compact",class:"me-1"},{default:a(()=>[l("a",{href:o.meeting_link,target:"_blank",class:"bg-primary"},[e(k,{icon:"ri ri-link"}),x(" Join ")],8,Oe)]),_:2},1024),K((D(),j(P,{color:"warning",density:"compact",class:"me-1",onClick:n=>i("edit",o)},{default:a(()=>[e(k,{icon:"ri-edit-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Edit Activity","start"]]),K((D(),j(P,{color:"error",density:"compact",onClick:n=>i("delete",o)},{default:a(()=>[e(k,{icon:"ri-delete-bin-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[ee,"Delete Activity","start"]])])]))),128))])]),_:1}))]),_:1}),e(G,{modelValue:t(m).edit,"onUpdate:modelValue":_[4]||(_[4]=o=>t(m).edit=o),"max-width":"600",persistent:""},{default:a(()=>[e(Ye,{timesheet_id:M==null?void 0:M.id,activity:t(d),onClose:_[3]||(_[3]=o=>w("edit")),onReload:v},null,8,["timesheet_id","activity"])]),_:1},8,["modelValue"]),e(G,{modelValue:t(m).delete,"onUpdate:modelValue":_[6]||(_[6]=o=>t(m).delete=o),"max-width":"400",persistent:""},{default:a(()=>[e(ye,{title:"activity",onClose:_[5]||(_[5]=o=>w("delete")),onDelete:f})]),_:1},8,["modelValue"])]),_:1}))}},He={__name:"timesheet-transfer",props:{timesheet_id:Number,require:String},emits:["close","reload"],setup(q,{emit:M}){const p=y(),r=q,C=M,m=y([]),d=y([]),v=y([]),w=r.require.toLowerCase(),i=y(!1),f=y({mentortutor_email:null,subject_id:null}),h=async()=>{const o="api/v1/user/mentor-tutors?role="+w;i.value=!0;try{const c=await Y.get(o);c&&(m.value=c)}catch(c){console.error(c)}finally{i.value=!1}},s=async(o,c=null)=>{if(f.value.subject_id=null,w=="mentor")f.value.subject_id=o[0].subjects[0].id;else{i.value=!0;try{const n=await Y.get("api/v1/user/mentor-tutors/"+c+"/subjects");n&&(v.value=n)}catch(n){console.error(n)}finally{i.value=!1}}},_=async()=>{var c,n;f.value.mentortutor_email=d.value.email;const{valid:o}=await p.value.validate();if(o){i.value=!0;try{const u=await Y.patch("api/v1/timesheet/"+r.timesheet_id+"/void",f.value);u&&(console.log(u),S("success",u.message,"bottom-end"),C("reload"),le.push("/admin/timesheet/"+u.data.timesheet_id),f.value={mentortutor_email:null,subject_id:null},d.value=[],le.go(0))}catch(u){if(console.log(u),(n=(c=u==null?void 0:u.response)==null?void 0:c.data)!=null&&n.errors){const b=u.response.data.errors;S("error",b,"bottom-end")}}finally{C("close"),i.value=!1}}};return de(()=>{h()}),(o,c)=>(D(),j(E,{class:"mx-auto my-8",elevation:"16",width:"450"},{default:a(()=>[e(ue,{ref_key:"formData",ref:p,"validate-on":"input",onSubmit:ie(_,["prevent"])},{default:a(()=>[e(se,null,{default:a(()=>[e(H,null,{default:a(()=>[x(" Timesheet Ownership Transfer ")]),_:1}),e(Ce,null,{default:a(()=>[x(" Change Timesheet Handler ")]),_:1})]),_:1}),e(A,null,{default:a(()=>[e(W,null,{default:a(()=>{var n;return[e($,{md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(d),"onUpdate:modelValue":[c[0]||(c[0]=u=>Ve(d)?d.value=u:null),c[1]||(c[1]=u=>s(t(d).roles,t(d).uuid))],label:"Mentor/Tutor",items:t(m),"item-props":u=>({title:u.full_name,subtitle:u.roles.map(b=>b.name).join(", ")}),rules:t(L).required,loading:t(i),disabled:t(i)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),((n=r.require)==null?void 0:n.toLowerCase())=="tutor"?(D(),j($,{key:0,md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(f).subject_id,"onUpdate:modelValue":c[2]||(c[2]=u=>t(f).subject_id=u),label:"Subject Tutoring",items:t(v),"item-title":"subject","item-value":"id",loading:t(i),disabled:t(i),rules:t(L).required},null,8,["modelValue","items","loading","disabled","rules"])]),_:1})):fe("",!0)]}),_:1})]),_:1}),e(re,{class:"mx-3 mb-3"},{default:a(()=>[e(P,{color:"error",onClick:c[3]||(c[3]=n=>C("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[x(" Save Changes "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1}))}},Ge={__name:"user-edit",props:["id","item","package_id"],emits:["close","reload"],setup(q,{emit:M}){var b,R,I,z,X,Z;const p=q,r=M,C=y([]),m=y([]),d=y([]),v=y([]),w=y(!1),i=y(!0),f=y(!0),h=y(),s=y({mentortutor_email:(b=p.item)==null?void 0:b.tutormentor_email,subject_id:(R=p.item)==null?void 0:R.subject_id,inhouse_id:(I=p.item)==null?void 0:I.inhouse_id,package_id:p.package_id,duration:(z=p.item)==null?void 0:z.duration,notes:(X=p.item)==null?void 0:X.notes,pic_id:(Z=p.item)==null?void 0:Z.pic_id}),_=async(U=!1)=>{f.value=!0;const T=U?"api/v1/user/mentor-tutors?inhouse=true":"api/v1/user/mentor-tutors";try{const N=await Y.get(T);N&&(U?v.value=Object.values(N):C.value=N)}catch(N){console.error(N)}finally{f.value=!1}},o=async()=>{f.value=!0;try{const U=await Y.get("api/v1/package/component/list");U&&(m.value=U)}catch(U){console.error(U)}finally{f.value=!1}},c=()=>{const U=s.value.package_id,T=m.value.findIndex(g=>g.id===U);let N=m.value[T];N.detail?(w.value=!0,s.value.duration=N.detail):(w.value=!1,s.value.duration=null)},n=async()=>{f.value=!0;try{const U=await Y.get("api/v1/user/component/list");U&&(d.value=U)}catch(U){console.error(U)}finally{f.value=!1}},u=async()=>{var T,N;const{valid:U}=await h.value.validate();if(U)try{const g=await Y.put("api/v1/timesheet/"+p.id+"/update",s.value);g&&(s.value={mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[]},S("success",g.message,"bottom-end"),r("reload"))}catch(g){if((N=(T=g==null?void 0:g.response)==null?void 0:T.data)!=null&&N.errors){const ce=g.response.data.errors;let ve="Validation errors:";for(const me in ce)ce.hasOwnProperty(me)&&(ve+=`
${me}: ${ce[me].join(", ")}`);S("error",ve,"bottom-end")}}finally{r("close")}};return de(()=>{_(!0),o(),n(),setTimeout(()=>{i.value=!1},2e3)}),(U,T)=>{const N=J("DialogCloseBtn");return D(),j(E,{title:"Edit Detail"},{default:a(()=>[e(N,{variant:"text",size:"default",onClick:T[0]||(T[0]=g=>r("close"))}),e(A,null,{default:a(()=>[e(ue,{onSubmit:ie(u,["prevent"]),ref_key:"formData",ref:h,"validate-on":"input"},{default:a(()=>[e(W,null,{default:a(()=>[e($,{md:"8"},{default:a(()=>[e(te,{variant:"solo",clearable:"",label:"Package",modelValue:t(s).package_id,"onUpdate:modelValue":[T[1]||(T[1]=g=>t(s).package_id=g),c],items:t(m),"item-props":g=>({title:g.package!=null?g.type_of+" - "+g.package:g.type_of}),"item-value":"id",rules:t(L).required,loading:t(f),disabled:t(f)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e($,{md:"4"},{default:a(()=>[e(B,{type:"number",variant:"solo",clearable:"",label:+t(s).duration/60?"Minutes ("+t(s).duration/60+" Hours)":"Minutes",readonly:t(w),modelValue:t(s).duration,"onUpdate:modelValue":T[2]||(T[2]=g=>t(s).duration=g),rules:t(L).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),e($,{md:"12"},{default:a(()=>[e(te,{variant:"solo",clearable:"",modelValue:t(s).inhouse_id,"onUpdate:modelValue":T[3]||(T[3]=g=>t(s).inhouse_id=g),label:"Inhouse Mentor/Tutor",items:t(v),"item-props":g=>({title:g.full_name}),"item-value":"uuid",rules:t(L).required,loading:t(f),disabled:t(f)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e($,{md:"12"},{default:a(()=>[e(te,{variant:"solo",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:t(s).pic_id,"onUpdate:modelValue":T[4]||(T[4]=g=>t(s).pic_id=g),items:t(d),"item-title":"full_name","item-value":"id",rules:t(L).required,loading:t(f),disabled:t(f)},null,8,["modelValue","items","rules","loading","disabled"])]),_:1}),e($,{md:"12"},{default:a(()=>[e(pe,{label:"Notes",modelValue:t(s).notes,"onUpdate:modelValue":T[5]||(T[5]=g=>t(s).notes=g),variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1}),e(Me,{class:"my-3"}),e(re,null,{default:a(()=>[e(P,{color:"error",type:"button",onClick:T[6]||(T[6]=g=>r("close"))},{default:a(()=>[e(k,{icon:"ri-close-line",class:"me-3"}),x(" Close ")]),_:1}),e(ne),e(P,{color:"success",type:"submit"},{default:a(()=>[x(" Save "),e(k,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Je={class:"w-100"},We={class:"mt-3 font-weight-light"},Xe=l("hr",{class:"my-2"},null,-1),Ze={key:0},Ke=l("tr",{class:"bg-secondary"},[l("td",null,"Name"),l("td",null,"School"),l("td",null,"Grade")],-1),Qe={key:1},et=l("td",{width:"20%"},"Name",-1),tt=l("td",{width:"1%"},":",-1),lt=l("td",null,"School Name",-1),at=l("td",{width:"1%"},":",-1),st=l("td",null,"Grade",-1),ot=l("td",{width:"1%"},":",-1),it=l("td",null,"Email",-1),nt=l("td",{width:"1%"},":",-1),dt={class:"mt-5 font-weight-light"},rt=l("hr",{class:"my-2"},null,-1),ut=l("td",{width:"30%"},"Program",-1),ct=l("td",{width:"1%"},":",-1),mt=l("td",null,"Package",-1),_t=l("td",{width:"1%"},":",-1),ft=l("td",null,"Person in Charge",-1),pt=l("td",{width:"1%"},":",-1),vt={class:"ms-4",type:"1"},gt=l("td",null,"Tutor/Mentor",-1),yt=l("td",{width:"1%"},":",-1),ht=l("td",null,"Inhouse Tutor/Mentor",-1),bt=l("td",{width:"1%"},":",-1),Vt=l("td",null,"Update On",-1),kt=l("td",{width:"1%"},":",-1),wt={class:"d-flex align-end w-100"},xt={class:"m-0 mb-1 text-white"},Dt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),$t={class:"text-end w-100"},Ct={class:"d-flex align-end w-100"},Tt={class:"m-0 mb-1 text-white"},Mt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),St={class:"text-end w-100"},Ut={class:"d-flex align-end w-100"},jt={class:"m-0 mb-1 text-white"},Yt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),Pt={class:"text-end w-100"},Lt={__name:"user-detail",props:{id:String},emits:["void"],setup(q,{emit:M}){const p=q,r=M,C=oe("reloadData"),m=oe("updateReload"),d=y([]),v=y([{edit:!1,void:!1,delete:!1}]),w=y(!1),i=async _=>{var o,c,n;w.value=!0;try{const u=await Y.get("api/v1/timesheet/"+_+"/detail");u&&(d.value=u,r("void",u.packageDetails.void))}catch(u){((o=u.response)==null?void 0:o.status)==400&&(S("error",(n=(c=u.response)==null?void 0:c.data)==null?void 0:n.errors,"bottom-end"),le.push("/admin/timesheet")),console.log(u)}finally{w.value=!1}},f=async()=>{var _,o,c;try{const n=await Y.delete("api/v1/timesheet/"+p.id+"/delete");n&&(d.value=n,S("success",n.message,"bottom-end"),v.value.delete=!1,le.push("/admin/timesheet"))}catch(n){((_=n.response)==null?void 0:_.status)==400&&S("error",(c=(o=n.response)==null?void 0:o.data)==null?void 0:c.errors,"bottom-end")}},h=_=>{v.value[_]?v.value[_]=!1:v.value[_]=!0},s=async(_,o)=>{var c;De();try{const n=await Y.get("api/v1/timesheet/"+_+"/export",{responseType:"blob"});if(n){const u=window.URL.createObjectURL(new Blob([n],{type:'"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"'})),b=document.createElement("a");b.href=u,b.setAttribute("download",`timesheet_${o}.xlsx`),document.body.appendChild(b),b.click(),document.body.removeChild(b),window.URL.revokeObjectURL(u),$e.close()}}catch(n){S("error",(c=n.response)==null?void 0:c.statusText,"bottom-end"),console.log(n)}};return de(()=>{i(p.id)}),ke(()=>{C.value&&(i(p.id),m(!1))}),(_,o)=>{const c=J("router-link");return D(),j(E,{class:"mb-3"},{default:a(()=>[e(H,{class:"d-flex justify-between align-center"},{default:a(()=>{var n;return[l("div",Je,[e(c,{to:"/admin/timesheet"},{default:a(()=>[e(k,{icon:"ri-arrow-left-line",color:"secondary",class:"me-2",size:"25"})]),_:1}),x(" Timesheet - "+V((n=t(d).packageDetails)==null?void 0:n.package_type),1)]),l("div",null,[e(we,{"close-on-content-click":!1,location:"bottom"},{activator:a(({props:u})=>[K((D(),j(P,xe({color:"secondary"},u),{default:a(()=>[e(k,{icon:"ri-settings-3-line"})]),_:2},1040)),[[ee,"Settings","start"]])]),default:a(()=>[e(Se,null,{default:a(()=>[e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[0]||(o[0]=u=>h("edit"))},[e(k,{icon:"ri-pencil-line",class:"me-2"}),x(" Edit TimeSheet ")])]),_:1}),e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[1]||(o[1]=u=>h("void"))},[e(k,{icon:"ri-exchange-2-line",class:"me-2"}),x(" Timesheet Ownership Transfer ")])]),_:1}),e(ae,null,{default:a(()=>[e(Ue,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[2]||(o[2]=u=>{var b,R,I,z,X,Z;return s(p.id,((R=(b=t(d))==null?void 0:b.packageDetails)==null?void 0:R.package_type)+"-"+((z=(I=t(d))==null?void 0:I.packageDetails)==null?void 0:z.package_name)+"_"+((Z=(X=t(d))==null?void 0:X.packageDetails)==null?void 0:Z.tutormentor_name))})},[e(k,{icon:"ri-download-line",class:"me-2"}),x(" Download TimeSheet ")])]),_:1})]),_:1}),e(ae,null,{default:a(()=>[l("div",{class:"cursor-pointer",onClick:o[3]||(o[3]=u=>h("delete"))},[e(k,{icon:"ri-delete-bin-line",class:"me-2"}),x(" Delete TimeSheet ")])]),_:1})]),_:1})]),_:1})])]}),_:1}),e(A,null,{default:a(()=>[t(w)?(D(),j(W,{key:1},{default:a(()=>[e($,{md:"7"},{default:a(()=>[e(Q,{type:"heading, paragraph, heading, paragraph",class:"mb-3"})]),_:1}),e($,{md:"5"},{default:a(()=>[e(Q,{type:"text@3",color:"#16B1FF",class:"mb-3"}),e(Q,{type:"text@3",color:"#91c45e",class:"mb-3"}),e(Q,{type:"text@3",color:"#e05e5e",class:"mb-3"})]),_:1})]),_:1})):(D(),j(W,{key:0,align:"center"},{default:a(()=>[e($,{md:"7"},{default:a(()=>[l("h4",We,[e(k,{icon:"ri-user-line",size:"17",class:"me-2"}),x(" Basic Profile ")]),Xe,e(_e,{density:"compact"},{default:a(()=>{var n,u;return[((n=t(d).clientProfile)==null?void 0:n.length)>1?(D(),O("tbody",Ze,[Ke,(D(!0),O(be,null,he(t(d).clientProfile,b=>(D(),O("tr",null,[l("td",null,V(b.client_name),1),l("td",null,V(b.client_school),1),l("td",null,V(b.client_grade),1)]))),256))])):((u=t(d).clientProfile)==null?void 0:u.length)==1?(D(),O("tbody",Qe,[l("tr",null,[et,tt,l("td",null,V(t(d).clientProfile[0].client_name),1)]),l("tr",null,[lt,at,l("td",null,V(t(d).clientProfile[0].client_school),1)]),l("tr",null,[st,ot,l("td",null,V(t(d).clientProfile[0].client_grade),1)]),l("tr",null,[it,nt,l("td",null,V(t(d).clientProfile[0].client_mail),1)])])):fe("",!0)]}),_:1}),l("h4",dt,[e(k,{icon:"ri-bookmark-line",class:"me-2",size:"17"}),x(" Package Details ")]),rt,e(_e,{density:"compact"},{default:a(()=>{var n,u,b,R,I,z;return[l("tbody",null,[l("tr",null,[ut,ct,l("td",null,V((n=t(d).packageDetails)==null?void 0:n.program_name),1)]),l("tr",null,[mt,_t,l("td",null,V(((u=t(d).packageDetails)==null?void 0:u.package_type)+" - "+((b=t(d).packageDetails)==null?void 0:b.package_name)),1)]),l("tr",null,[ft,pt,l("td",null,[l("ol",vt,[l("li",null,V((R=t(d).packageDetails)==null?void 0:R.pic_name),1)])])]),l("tr",null,[gt,yt,l("td",null,V((I=t(d).packageDetails)==null?void 0:I.tutormentor_name),1)]),l("tr",null,[ht,bt,l("td",null,V((z=t(d).packageDetails)==null?void 0:z.inhouse_name),1)]),l("tr",null,[Vt,kt,l("td",null,V(t(F)().format("LLL")),1)])])]}),_:1})]),_:1}),e($,{md:"5"},{default:a(()=>[e(E,{color:"#16B1FF",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(H,{class:"text-white"},{default:a(()=>[x(" Total Minutes of Package ")]),_:1})]),_:1}),e(A,{class:"d-flex justify-between"},{default:a(()=>{var n;return[l("div",wt,[l("h1",xt,V((n=t(d).packageDetails)==null?void 0:n.duration_in_minutes),1),Dt])]}),_:1})]),e(A,null,{default:a(()=>[l("div",$t,[e(k,{icon:"ri-calendar-schedule-line",size:"60"})])]),_:1})]),_:1}),e(E,{color:"#91c45e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(H,{class:"text-white"},{default:a(()=>[x(" Total Minutes Spent ")]),_:1})]),_:1}),e(A,{class:"d-flex justify-between"},{default:a(()=>{var n;return[l("div",Ct,[l("h1",Tt,V((n=t(d).packageDetails)==null?void 0:n.time_spent_in_minutes),1),Mt])]}),_:1})]),e(A,null,{default:a(()=>[l("div",St,[e(k,{icon:"ri-timer-flash-line",size:"60",color:"white"})])]),_:1})]),_:1}),e(E,{color:"#e05e5e",class:"mb-2 d-flex align-center"},{default:a(()=>[l("div",null,[e(se,null,{default:a(()=>[e(H,{class:"text-white"},{default:a(()=>[x(" Total Minutes Left ")]),_:1})]),_:1}),e(A,{class:"d-flex justify-between"},{default:a(()=>{var n,u;return[l("div",Ut,[l("h1",jt,V(((n=t(d).packageDetails)==null?void 0:n.duration_in_minutes)-((u=t(d).packageDetails)==null?void 0:u.time_spent_in_minutes)),1),Yt])]}),_:1})]),e(A,null,{default:a(()=>[l("div",Pt,[e(k,{icon:"ri-timer-2-line",size:"60"})])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),e(G,{modelValue:t(v).edit,"onUpdate:modelValue":o[6]||(o[6]=n=>t(v).edit=n),"max-width":"600",persistent:""},{default:a(()=>{var n;return[e(Ge,{item:t(d).editableColumns,package_id:(n=t(d).packageDetails)==null?void 0:n.package_id,id:p.id,onClose:o[4]||(o[4]=u=>h("edit")),onReload:o[5]||(o[5]=u=>i(p.id))},null,8,["item","package_id","id"])]}),_:1},8,["modelValue"]),e(G,{modelValue:t(v).delete,"onUpdate:modelValue":o[8]||(o[8]=n=>t(v).delete=n),"max-width":"400",persistent:""},{default:a(()=>[e(ye,{title:"timesheet",onDelete:f,onClose:o[7]||(o[7]=n=>h("delete"))})]),_:1},8,["modelValue"]),e(G,{modelValue:t(v).void,"onUpdate:modelValue":o[10]||(o[10]=n=>t(v).void=n),"max-width":"400",persistent:""},{default:a(()=>[e(He,{timesheet_id:p.id,require:t(d).editableColumns.tutormentor_role,onClose:o[9]||(o[9]=n=>h("void"))},null,8,["timesheet_id","require"])]),_:1},8,["modelValue"])]),_:1})}}},qt={class:"h-auto position-relative"},Nt={key:0,class:"overlay"},At=l("div",{class:"bg-secondary",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9998",width:"100%",opacity:"0.6"}},null,-1),Bt={class:"d-flex align-center justify-center",style:{height:"100%",position:"absolute",left:"0",top:"0","z-index":"9999",width:"100%",opacity:"1"}},Et={class:"text-center"},Rt=l("h2",{class:"text-white mt-3"},"This Timesheet Has Changed Owner",-1),rl={__name:"timesheet-detail",props:{id:Number},setup(q){const p=q.id,r=y(!1),C=y(!1);ge("reloadData",r),ge("updateReload",d=>{r.value=d});const m=d=>{C.value=d};return(d,v)=>(D(),O("div",qt,[t(C)=="true"?(D(),O("div",Nt,[At,l("div",Bt,[l("div",Et,[e(k,{color:"white",icon:"ri-lock-line",size:"50"}),Rt,e(P,{color:"light",class:"mt-4",onClick:v[0]||(v[0]=w=>t(le).push({path:"/admin/timesheet"}))},{default:a(()=>[x(" Back to List ")]),_:1})])])])):fe("",!0),e(Lt,{id:t(p),onVoid:m},null,8,["id"]),e(Fe,{id:t(p)},null,8,["id"])]))}};export{rl as default};
