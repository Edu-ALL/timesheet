import{r as p,e as M,f as h,w as o,A as N,s as R,U,l as B,o as n,b as a,u as r,z as C,W as q,a as e,c as v,X as L,F as j,h as E,t as c,n as W,V as d,j as i,Y as X}from"./main-CRGqjzw-.js";import{a as Y}from"./avatar-1-BpD18F9D.js";import{a as G,b as J,c as K,d as O}from"./avatar-5-DCc5XOFQ.js";import{V as Q,b as Z,a as $}from"./VCard-Bc3Py79B.js";import{V as A,a as T}from"./VRow-BzPg3j71.js";import{V as ee}from"./VAutocomplete-DNO_oIon.js";import{V as te,a as ae}from"./VTable-BC4dX_NT.js";import{V as se}from"./VPagination-BMvyxcIy.js";import{V as oe}from"./VBadge-CO0h-5P0.js";import{V as D}from"./VTooltip-C2I2Mm4O.js";import{V as le}from"./VAvatar-hocph2ML.js";import"./VImg-T0kH_gqG.js";import"./VList-BdDJaDDw.js";import"./ssrBoot-C0V9aGId.js";import"./VDivider-BV6CD0GL.js";import"./VCheckboxBtn-CoG9ThHX.js";import"./VSelectionControl-BXVdasBI.js";import"./VSlideGroup-5qf8JxqU.js";const re=e("div",{class:"d-flex justify-between align-center"},[e("div",{class:"w-100"},[e("h4",null,"Timesheet List")])],-1),ne=e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase",width:"1%"}," No "),e("th",{class:"text-uppercase text-center"},"School/Student Name"),e("th",{class:"text-uppercase text-center"},"Program Name"),e("th",{class:"text-uppercase text-center"},"Package"),e("th",{class:"text-uppercase text-center"},"Tutor/Mentor"),e("th",{class:"text-uppercase text-center"},"PIC"),e("th",{class:"text-uppercase text-center"},"Total Hours"),e("th",{class:"text-uppercase text-center"},"Used"),e("th",{class:"text-uppercase text-center"},"#")])],-1),ce={class:"text-start"},ie={class:"text-left"},ue={class:"text-left"},de={class:"text-left"},pe={class:"text-left"},me={key:0},_e=e("tr",null,[e("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),ge=[_e],fe={class:"d-flex justify-center mt-5"},ze={__name:"timesheet",setup(he){const z=[Y,G,J,K,O],m=p(1),P=p(),_=p(),y=p([]),u=p(!1),S=p([]),g=p(),V=async()=>{var s,f;const x="?page="+m.value,l=_.value?"&keyword="+_.value:"",k=g.value?"&package_id="+g.value:"",b="&paginate=true";try{u.value=!0;const t=await N.get("api/v1/timesheet/list"+x+l+k+b);t&&(m.value=t.current_page,P.value=t.last_page,y.value=t),u.value=!1}catch(t){R("error",(f=(s=t.response)==null?void 0:s.data)==null?void 0:f.message,"bottom-end"),console.error(t),u.value=!1}},F=async()=>{const x=U.getUser().role_detail.length==1?"?category="+U.getUser().role_detail[0].role.toLowerCase():"";try{const l=await N.get("api/v1/package/component/list"+x);l&&(S.value=l)}catch(l){console.error(l)}},H=async()=>{m.value=1,await V()};return M(()=>{V(),F()}),(x,l)=>{const k=B("VText"),b=B("router-link");return n(),h(Q,null,{default:o(()=>[a(Z,null,{default:o(()=>[re]),_:1}),a($,null,{default:o(()=>[a(A,{class:"my-1 justify-space-between"},{default:o(()=>[a(T,{cols:"12",md:"6"},{default:o(()=>[a(A,null,{default:o(()=>[a(T,{cols:"12",md:"6"},{default:o(()=>[a(ee,{clearable:"true",modelValue:r(g),"onUpdate:modelValue":[l[0]||(l[0]=s=>C(g)?g.value=s:null),V],label:"Package",items:r(S),"item-props":s=>({title:s.package!=null?s.type_of+" - "+s.package:s.type_of}),"item-value":"id",placeholder:"Select Package",variant:"solo",loading:r(u),disabled:r(u)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1}),a(T,{cols:"12",md:"3"},{default:o(()=>[a(q,{loading:r(u),disabled:r(u),"append-inner-icon":"ri-search-line",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:r(_),"onUpdate:modelValue":l[1]||(l[1]=s=>C(_)?_.value=s:null),onChange:H},null,8,["loading","disabled","modelValue"])]),_:1})]),_:1}),r(u)?(n(),h(te,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(n(),h(ae,{key:1,class:"text-no-wrap"},{default:o(()=>{var s,f;return[ne,e("tbody",null,[(n(!0),v(j,null,L(r(y).data,(t,w)=>(n(),v("tr",{key:w},[e("td",null,c(parseInt(w)+1),1),e("td",{class:W(t.group?"cursor-pointer text-left":"text-left")},[t.group?(n(),h(k,{key:0},{default:o(()=>[a(d,{icon:"ri-group-line",class:"me-3"}),i(" "+c(t.clients[0])+" ",1),a(oe,{color:"error",content:t.clients.length-1+"+",inline:""},null,8,["content"]),a(D,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:o(()=>[(n(!0),v(j,null,L(t.clients,I=>(n(),v("div",null,c(I),1))),256))]),_:2},1024)]),_:2},1024)):(n(),h(k,{key:1},{default:o(()=>[a(d,{icon:"ri-user-line",class:"me-3"}),i(" "+c(t.clients),1)]),_:2},1024))],2),e("td",null,[a(d,{icon:"ri-bookmark-3-line",class:"me-3"}),i(" "+c(t.program_name),1)]),e("td",ce,[a(d,{icon:"ri-bookmark-line",class:"me-3"}),i(" "+c(t.detail_package?t.package_type+" - "+t.detail_package:t.package_type),1)]),e("td",ie,[a(le,{size:"25",class:"avatar-center me-3",image:z[w%5]},null,8,["image"]),i(" "+c(t.tutor_mentor),1)]),e("td",ue,[a(d,{icon:"ri-user-line",class:"cursor-pointer me-3"}),i(" "+c(t.admin),1)]),e("td",de,[a(d,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),i(" "+c(t.duration/60)+" Hours ",1)]),e("td",pe,[a(d,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),i(" "+c(t.spent/60)+" Hours ",1)]),e("td",null,[a(b,{to:"/user/timesheet/"+t.id+"/"+t.require.toLowerCase()},{default:o(()=>[a(X,{color:"secondary"},{default:o(()=>[a(d,{icon:"ri-timeline-view",class:"cursor-pointer"}),a(D,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:o(()=>[i(" View Detail ")]),_:1})]),_:1})]),_:2},1032,["to"])])]))),128))]),((f=(s=r(y))==null?void 0:s.data)==null?void 0:f.length)==0?(n(),v("tfoot",me,ge)):E("",!0)]}),_:1})),e("div",fe,[a(se,{modelValue:r(m),"onUpdate:modelValue":[l[2]||(l[2]=s=>C(m)?m.value=s:null),V],length:r(P),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{ze as default};
