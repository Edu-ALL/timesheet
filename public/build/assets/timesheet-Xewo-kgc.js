import{r as u,e as W,f as k,w as s,A as N,s as X,l as U,o as d,b as t,u as l,z as w,W as Y,a as e,c as y,X as j,F as A,h as q,t as p,n as G,V as g,j as m,Y as J}from"./main-BnUI2Chz.js";import{a as K}from"./avatar-1-BpD18F9D.js";import{a as O,b as Q,c as Z,d as $}from"./avatar-5-DCc5XOFQ.js";import{d as ee}from"./debounce-tI2l7_MG.js";import{V as te,b as ae,a as oe}from"./VCard-qxlU1t6w.js";import{V as D,a as P}from"./VRow-BkiGOIgS.js";import{V as z}from"./VAutocomplete-B5PhmNYO.js";import{V as le,a as se}from"./VTable-D2bZ-V8h.js";import{V as re}from"./VPagination-BXWfEHcY.js";import{V as ne}from"./VBadge-DaB1zdbs.js";import{V as F}from"./VTooltip-BQDYgZUk.js";import{V as ce}from"./VAvatar-EbP5RMBl.js";import"./VImg-BmlavG2q.js";import"./VList-vdjUdG8G.js";import"./ssrBoot-BmVP6eig.js";import"./VDivider-C4yYochh.js";import"./VCheckboxBtn-DvOdS_5P.js";import"./VSelectionControl-Dz0wXcjS.js";import"./VSlideGroup-L2s36Ean.js";const ie=e("div",{class:"d-flex justify-between align-center"},[e("div",{class:"w-100"},[e("h4",null,"Timesheet List")])],-1),ue=e("thead",null,[e("tr",null,[e("th",{class:"text-uppercase",width:"1%"}," No "),e("th",{class:"text-uppercase text-center"},"School/Student Name"),e("th",{class:"text-uppercase text-center"},"Program Name"),e("th",{class:"text-uppercase text-center"},"Package"),e("th",{class:"text-uppercase text-center"},"Tutor/Mentor"),e("th",{class:"text-uppercase text-center"},"PIC"),e("th",{class:"text-uppercase text-center"},"Total Hours"),e("th",{class:"text-uppercase text-center"},"Used"),e("th",{class:"text-uppercase text-center"},"#")])],-1),de={class:"text-start"},pe={class:"text-left"},me={class:"text-left"},ge={class:"text-left"},_e={class:"text-left"},fe={key:0},ve=e("tr",null,[e("td",{colspan:"9",class:"text-center"}," Sorry, no data found. ")],-1),he=[ve],Ve={class:"d-flex justify-center mt-5"},Re={__name:"timesheet",setup(xe){const H=[K,O,Q,Z,$];u([]);const _=u(1),S=u(),f=u(),T=u([]),c=u(!1),B=u([]),v=u(),I=u([]),h=u(),V=async()=>{var x,a;const r="?page="+_.value,i=f.value?"&keyword="+f.value:"",b=v.value?"&program_name="+encodeURIComponent(v.value):"",C=h.value?"&package_id="+h.value:"",o="&paginate=true";try{c.value=!0;const n=await N.get("api/v1/timesheet/list"+r+i+b+C+o);n&&(_.value=n.current_page,S.value=n.last_page,T.value=n),c.value=!1}catch(n){X("error",(a=(x=n.response)==null?void 0:x.data)==null?void 0:a.message,"bottom-end"),console.error(n),c.value=!1}},L=async()=>{try{const r=await N.get("api/v1/program/component/list");r&&(B.value=r)}catch(r){console.error(r)}},R=async()=>{try{const r=await N.get("api/v1/package/component/list");r&&(I.value=r)}catch(r){console.error(r)}},M=ee(async()=>{_.value=1,await V()},1e3);return W(()=>{V(),L(),R()}),(r,i)=>{const b=U("VText"),C=U("router-link");return d(),k(te,null,{default:s(()=>[t(ae,null,{default:s(()=>[ie]),_:1}),t(oe,null,{default:s(()=>[t(D,{class:"my-1 justify-space-between"},{default:s(()=>[t(P,{cols:"12",md:"6"},{default:s(()=>[t(D,null,{default:s(()=>[t(P,{cols:"12",md:"6"},{default:s(()=>[t(z,{clearable:"",modelValue:l(v),"onUpdate:modelValue":[i[0]||(i[0]=o=>w(v)?v.value=o:null),V],label:"Program Name",items:l(B),"item-title":"program_name",placeholder:"Select Program Name",variant:"solo",loading:l(c),disabled:l(c)},null,8,["modelValue","items","loading","disabled"])]),_:1}),t(P,{cols:"12",md:"6"},{default:s(()=>[t(z,{clearable:"true",modelValue:l(h),"onUpdate:modelValue":[i[1]||(i[1]=o=>w(h)?h.value=o:null),V],label:"Package",items:l(I),"item-props":o=>({title:o.package!=null?o.type_of+" - "+o.package:o.type_of}),"item-value":"id",placeholder:"Select Package",variant:"solo",loading:l(c),disabled:l(c)},null,8,["modelValue","items","item-props","loading","disabled"])]),_:1})]),_:1})]),_:1}),t(P,{cols:"12",md:"3"},{default:s(()=>[t(Y,{loading:l(c),disabled:l(c),"append-inner-icon":"ri-search-line",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:l(f),"onUpdate:modelValue":i[2]||(i[2]=o=>w(f)?f.value=o:null),onInput:l(M)},null,8,["loading","disabled","modelValue","onInput"])]),_:1})]),_:1}),l(c)?(d(),k(le,{key:0,class:"mx-auto border",type:"table-thead, table-row@10"})):(d(),k(se,{key:1,class:"text-no-wrap"},{default:s(()=>{var o,x;return[ue,e("tbody",null,[(d(!0),y(A,null,j(l(T).data,(a,n)=>(d(),y("tr",{key:n},[e("td",null,p(parseInt(n)+1),1),e("td",{class:G(a.group?"cursor-pointer text-left":"text-left")},[a.group?(d(),k(b,{key:0},{default:s(()=>[t(g,{icon:"ri-group-line",class:"me-3"}),m(" "+p(a.clients[0])+" ",1),t(ne,{color:"error",content:a.clients.length-1+"+",inline:""},null,8,["content"]),t(F,{activator:"parent",location:"top",transition:"scroll-y-transition",class:"bg-white"},{default:s(()=>[(d(!0),y(A,null,j(a.clients,E=>(d(),y("div",null,p(E),1))),256))]),_:2},1024)]),_:2},1024)):(d(),k(b,{key:1},{default:s(()=>[t(g,{icon:"ri-user-line",class:"me-3"}),m(" "+p(a.clients),1)]),_:2},1024))],2),e("td",null,[t(g,{icon:"ri-bookmark-3-line",class:"me-3"}),m(" "+p(a.program_name),1)]),e("td",de,[t(g,{icon:"ri-bookmark-line",class:"me-3"}),m(" "+p(a.detail_package?a.package_type+" - "+a.detail_package:a.package_type),1)]),e("td",pe,[t(ce,{size:"25",class:"avatar-center me-3",image:H[n%5]},null,8,["image"]),m(" "+p(a.tutor_mentor),1)]),e("td",me,[t(g,{icon:"ri-user-line",class:"cursor-pointer me-3"}),m(" "+p(a.admin),1)]),e("td",ge,[t(g,{icon:"ri-calendar-schedule-line",class:"cursor-pointer me-3"}),m(" "+p(a.duration/60)+" Hours ",1)]),e("td",_e,[t(g,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),m(" "+p(a.spent/60)+" Hours ",1)]),e("td",null,[t(C,{to:"/admin/timesheet/"+a.id},{default:s(()=>[t(J,{color:"secondary"},{default:s(()=>[t(g,{icon:"ri-timeline-view",class:"cursor-pointer"}),t(F,{activator:"parent",location:"top",transition:"scroll-y-transition"},{default:s(()=>[m(" View Detail ")]),_:1})]),_:1})]),_:2},1032,["to"])])]))),128))]),((x=(o=l(T))==null?void 0:o.data)==null?void 0:x.length)==0?(d(),y("tfoot",fe,he)):q("",!0)]}),_:1})),e("div",Ve,[t(re,{modelValue:l(_),"onUpdate:modelValue":[i[3]||(i[3]=o=>w(_)?_.value=o:null),V],length:l(S),"total-visible":4,color:"primary","show-first-last-page":!1},null,8,["modelValue","length"])])]),_:1})]),_:1})}}};export{Re as default};
