import{_ as ge}from"./DeleteHandler.vue_vue_type_script_setup_true_lang-Dirjx3qc.js";import{r as b,l as z,o as x,f as U,w as s,b as e,Z as oe,W as B,u as t,v as I,Y as E,V as w,j as $,m as ne,A,s as M,$ as Q,t as y,e as de,a,x as H,c as q,X as he,F as re,a0 as Ve,i as be,P as ke,h as we,k as ve,a1 as xe,a2 as De,a3 as ye}from"./main-C3OlSVSp.js";import{r as S}from"./rules-B5G8qOzK.js";import{a as j,c as ue,V as R,b as W,d as le}from"./VCard-C6d7XSzG.js";import{V as ce}from"./VForm-ZEf4yDYD.js";import{V as K,a as k}from"./VRow-DlN-UPti.js";import{V as me}from"./VTextarea-B8zLPHhV.js";import{V as J}from"./VDialog-z5UIQEZP.js";import{a as ie,V as X}from"./VTable-CpD-d5M2.js";import{T as Z}from"./index-DjdUdsnG.js";import{V as Ce}from"./VCheckbox-DHNTeHcR.js";import{V as ae}from"./VAutocomplete-CZ52kkfy.js";import{V as $e}from"./VDivider-Jwd7hEqO.js";import{V as Me,a as se,b as Te}from"./VList-BxMz7_Xr.js";import"./VAvatar-CxvDm3s1.js";import"./VImg-D3jGmIjO.js";import"./VTooltip-D1-ttL4F.js";import"./VCheckboxBtn-DTkrxtAI.js";import"./VSelectionControl-DufMIoIJ.js";import"./VSlideGroup-DPwjukuR.js";import"./ssrBoot-DNzzmp4I.js";const Se={__name:"activity-add",props:{id:String},emits:["close","reload"],setup(L,{emit:g}){const h=L,o=g,u=b(),d=b({activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}),_=()=>{d.value={activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}},T=async()=>{var n,v;const{valid:D}=await u.value.validate();if(D)try{const m=await A.post("api/v1/timesheet/"+h.id+"/activity",d.value);m&&M("success",m.message,"bottom-end")}catch(m){if((v=(n=m==null?void 0:m.response)==null?void 0:n.data)!=null&&v.errors){const l=m.response.data.errors;let c="Validation errors:";for(const i in l)l.hasOwnProperty(i)&&(c+=`
${i}: ${l[i].join(", ")}`);M("error",c,"bottom-end")}else M("error",m.response.data.message,"bottom-end")}finally{_(),o("reload"),o("close")}};return(D,n)=>{const v=z("DialogCloseBtn"),m=z("VDateInput");return x(),U(R,{title:"New Activity"},{default:s(()=>[e(v,{variant:"text",size:"default",onClick:n[0]||(n[0]=l=>o("close"))}),e(j,null,{default:s(()=>[e(ce,{onSubmit:oe(T,["prevent"]),ref_key:"formData",ref:u,"validate-on":"input"},{default:s(()=>[e(K,null,{default:s(()=>[e(k,{cols:"12"},{default:s(()=>[e(B,{modelValue:t(d).activity,"onUpdate:modelValue":n[1]||(n[1]=l=>t(d).activity=l),label:"Activity Name",placeholder:"Activity",variant:"solo",rules:t(S).required},null,8,["modelValue","rules"])]),_:1}),e(k,{cols:"12"},{default:s(()=>[e(me,{modelValue:t(d).description,"onUpdate:modelValue":n[2]||(n[2]=l=>t(d).description=l),label:"Description",placeholder:"Description",variant:"solo",rules:t(S).required},null,8,["modelValue","rules"])]),_:1}),e(k,{md:"6",cols:"12"},{default:s(()=>[e(m,{modelValue:t(d).date,"onUpdate:modelValue":n[3]||(n[3]=l=>t(d).date=l),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(S).required},null,8,["modelValue","rules"])]),_:1}),e(k,{md:"3",cols:"6"},{default:s(()=>[e(B,{type:"time",modelValue:t(d).start_time,"onUpdate:modelValue":n[4]||(n[4]=l=>t(d).start_time=l),label:"Start Time",placeholder:"Start Time",rules:t(S).required,variant:"solo",class:"mb-3",onChange:n[5]||(n[5]=l=>t(d).start_date=t(I)(t(d).date).format("YYYY-MM-DD")+" "+t(d).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e(k,{md:"3",cols:"6"},{default:s(()=>[e(B,{type:"time",modelValue:t(d).end_time,"onUpdate:modelValue":n[6]||(n[6]=l=>t(d).end_time=l),label:"End Time",placeholder:"End Time",variant:"solo",onChange:n[7]||(n[7]=l=>t(d).end_date=t(I)(t(d).date).format("YYYY-MM-DD")+" "+t(d).end_time+":00")},null,8,["modelValue"])]),_:1}),e(k,{md:"12",cols:"12"},{default:s(()=>[e(B,{type:"text",modelValue:t(d).meeting_link,"onUpdate:modelValue":n[8]||(n[8]=l=>t(d).meeting_link=l),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(S).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(ue,{class:"mt-5"},{default:s(()=>[e(E,{type:"button",color:"error",onClick:n[9]||(n[9]=l=>o("close"))},{default:s(()=>[e(w,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1}),e(ne),e(E,{type:"submit",color:"success"},{default:s(()=>[$(" Save "),e(w,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Ye={__name:"activity-edit",props:{timesheet_id:Number,activity:String},emits:["close","reload"],setup(L,{emit:g}){const h=b(),o=L,u=g,d=Q("updateReload"),_=b({activity:o==null?void 0:o.activity.activity,description:o==null?void 0:o.activity.description,date:new Date(o==null?void 0:o.activity.start_date),start_time:o==null?void 0:o.activity.start_time,end_time:o==null?void 0:o.activity.end_time,start_date:I(o==null?void 0:o.activity.start_date).format("YYYY-MM-DD")+" "+(o==null?void 0:o.activity.start_time)+":00",end_date:(o==null?void 0:o.activity.end_time)!=0?I(o==null?void 0:o.activity.start_date).format("YYYY-MM-DD")+" "+(o==null?void 0:o.activity.end_time)+":00":null,meeting_link:o==null?void 0:o.activity.meeting_link}),T=async()=>{var n,v;const{valid:D}=await h.value.validate();if(D)try{const m=await A.put("api/v1/timesheet/"+o.timesheet_id+"/activity/"+o.activity.id,_.value);m&&(M("success",m.message,"bottom-end"),u("reload"))}catch(m){if((v=(n=m==null?void 0:m.response)==null?void 0:n.data)!=null&&v.errors){const l=m.response.data.errors;let c="Validation errors:";if(typeof l!="string"){for(const i in l)l.hasOwnProperty(i)&&(c+=`
${i}: ${l[i].join(", ")}`);M("error",c,"bottom-end")}else M("error",m.response.data.errors,"bottom-end")}}finally{u("close"),setTimeout(()=>{d(!0)},3e3)}};return(D,n)=>{const v=z("DialogCloseBtn"),m=z("VDateInput");return x(),U(R,{title:"Edit Activity"},{default:s(()=>[e(v,{variant:"text",size:"default",onClick:n[0]||(n[0]=l=>u("close"))}),e(j,null,{default:s(()=>[e(ce,{onSubmit:oe(T,["prevent"]),ref_key:"formData",ref:h,"validate-on":"input"},{default:s(()=>[e(K,null,{default:s(()=>[e(k,{cols:"12"},{default:s(()=>[e(B,{modelValue:t(_).activity,"onUpdate:modelValue":n[1]||(n[1]=l=>t(_).activity=l),label:"Activity Name",rules:t(S).required,placeholder:"Activity",variant:"solo"},null,8,["modelValue","rules"])]),_:1}),e(k,{cols:"12"},{default:s(()=>[e(me,{modelValue:t(_).description,"onUpdate:modelValue":n[2]||(n[2]=l=>t(_).description=l),label:"Description",rules:t(S).required,placeholder:"Description",variant:"solo"},null,8,["modelValue","rules"])]),_:1}),e(k,{md:"6",cols:"12"},{default:s(()=>[$(y(D.activityDate)+" ",1),e(m,{modelValue:t(_).date,"onUpdate:modelValue":n[3]||(n[3]=l=>t(_).date=l),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(S).required},null,8,["modelValue","rules"])]),_:1}),e(k,{md:"3",cols:"6"},{default:s(()=>[e(B,{type:"time",modelValue:t(_).start_time,"onUpdate:modelValue":n[4]||(n[4]=l=>t(_).start_time=l),label:"Start Time",rules:t(S).required,placeholder:"Start Time",variant:"solo",onChange:n[5]||(n[5]=l=>t(_).start_date=t(I)(o==null?void 0:o.activity.date).format("YYYY-MM-DD")+" "+t(_).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e(k,{md:"3",cols:"6"},{default:s(()=>[e(B,{type:"time",modelValue:t(_).end_time,"onUpdate:modelValue":n[6]||(n[6]=l=>t(_).end_time=l),label:"End Time",placeholder:"End Time",variant:"solo",onChange:n[7]||(n[7]=l=>t(_).end_date=t(I)(o==null?void 0:o.activity.date).format("YYYY-MM-DD")+" "+t(_).end_time+":00")},null,8,["modelValue"])]),_:1}),e(k,{md:"12",cols:"12"},{default:s(()=>[e(B,{type:"text",modelValue:t(_).meeting_link,"onUpdate:modelValue":n[8]||(n[8]=l=>t(_).meeting_link=l),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(S).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(ue,{class:"mt-5"},{default:s(()=>[e(E,{color:"error",onClick:n[9]||(n[9]=l=>u("close"))},{default:s(()=>[e(w,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1}),e(ne),e(E,{color:"success",type:"submit"},{default:s(()=>[$(" Save "),e(w,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Ue={class:"d-flex justify-between align-center"},Pe=a("div",{class:"w-100"},[a("h4",null,"Activity")],-1),Ae=a("thead",null,[a("tr",null,[a("th",{class:"text-uppercase",width:"1%"}," No "),a("th",{class:"text-uppercase text-center"},"Activity"),a("th",{class:"text-uppercase text-center"},"Description"),a("th",{class:"text-uppercase text-center"},"Date"),a("th",{class:"text-uppercase text-center"},"Start Time"),a("th",{class:"text-uppercase text-center"},"End Time"),a("th",{class:"text-uppercase text-center"},"Time Spent"),a("th",{class:"text-uppercase text-center"},"Status"),a("th",{class:"text-uppercase text-end"},"#")])],-1),Le={width:"1%"},je={class:"text-center"},Ne={class:"text-center"},Ee={class:"text-center"},Be={class:"text-center"},Re={class:"text-end"},Ie={__name:"timesheet-detail",props:{id:String},setup(L){const g=L,h=Q("updateReload"),o=b([]),u=b(!1),d=b([{add:!1,edit:!1,delete:!1}]),_=b([]),T=async()=>{u.value=!0;try{const l=await A.get("api/v1/timesheet/"+g.id+"/activities");l&&(o.value=l)}catch(l){console.error(l)}finally{u.value=!1}},D=l=>{d.value[l]?d.value[l]=!1:d.value[l]=!0},n=(l,c)=>{_.value=c,D(l)},v=async()=>{var l,c,i;try{const r=await A.delete("api/v1/timesheet/"+g.id+"/activity/"+_.value.id);r&&(M("success",r.message,"bottom-end"),D("delete"))}catch(r){((l=r.response)==null?void 0:l.status)==400&&M("error",(i=(c=r.response)==null?void 0:c.data)==null?void 0:i.errors,"bottom-end")}finally{T(),h(!0)}},m=async l=>{var c,i;try{const r=await A.put("api/v1/timesheet/"+g.id+"/activity/"+l.id,l);r&&M("success",r.message,"bottom-end")}catch(r){if((i=(c=r==null?void 0:r.response)==null?void 0:c.data)!=null&&i.errors){const f=r.response.data.errors;let N="Validation errors:";if(typeof f!="string"){for(const P in f)f.hasOwnProperty(P)&&(N+=`
${P}: ${f[P].join(", ")}`);M("error",N,"bottom-end")}else M("error",r.response.data.errors,"bottom-end")}}finally{T(),h(!0)}};return de(()=>{T()}),(l,c)=>(x(),U(R,null,{default:s(()=>[e(W,null,{default:s(()=>[a("div",Ue,[Pe,H((x(),U(E,{onClick:c[0]||(c[0]=i=>D("add"))},{default:s(()=>[e(w,{icon:"ri-add-line"})]),_:1})),[[Z,"New Activity","start"]]),e(J,{modelValue:t(d).add,"onUpdate:modelValue":c[2]||(c[2]=i=>t(d).add=i),"max-width":"600",persistent:""},{default:s(()=>[e(Se,{id:g.id,onClose:c[1]||(c[1]=i=>D("add")),onReload:T},null,8,["id"])]),_:1},8,["modelValue"])])]),_:1}),e(j,null,{default:s(()=>[t(u)?(x(),U(X,{key:1,type:"table"})):(x(),U(ie,{key:0,class:"text-no-wrap",height:"400","fixed-header":""},{default:s(()=>[Ae,a("tbody",null,[(x(!0),q(re,null,he(t(o),(i,r)=>(x(),q("tr",{key:r},[a("td",Le,y(r+1),1),a("td",null,y(i.activity),1),a("td",je,y(i.description),1),a("td",null,y(l.$moment(i.start_date).format("MMM Do YYYY")),1),a("td",Ne,y(i.start_time),1),a("td",Ee,y(i.end_time),1),a("td",Be,[e(w,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),$(" "+y(i.estimate)+" Minutes ",1)]),a("td",null,[H(e(Ce,{color:"success",modelValue:i.status,"onUpdate:modelValue":[f=>i.status=f,f=>m(i)],value:"1","false-value":0},null,8,["modelValue","onUpdate:modelValue"]),[[Z,i.status?"Completed":"Not Yet","start"]])]),a("td",Re,[H((x(),U(E,{color:"warning",density:"compact",class:"me-1",onClick:f=>n("edit",i)},{default:s(()=>[e(w,{icon:"ri-edit-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[Z,"Edit Activity","start"]]),H((x(),U(E,{color:"error",density:"compact",onClick:f=>n("delete",i)},{default:s(()=>[e(w,{icon:"ri-delete-bin-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[Z,"Delete Activity","start"]])])]))),128))])]),_:1}))]),_:1}),e(J,{modelValue:t(d).edit,"onUpdate:modelValue":c[4]||(c[4]=i=>t(d).edit=i),"max-width":"600",persistent:""},{default:s(()=>[e(Ye,{timesheet_id:g==null?void 0:g.id,activity:t(_),onClose:c[3]||(c[3]=i=>D("edit")),onReload:T},null,8,["timesheet_id","activity"])]),_:1},8,["modelValue"]),e(J,{modelValue:t(d).delete,"onUpdate:modelValue":c[6]||(c[6]=i=>t(d).delete=i),"max-width":"400",persistent:""},{default:s(()=>[e(ge,{title:"activity",onClose:c[5]||(c[5]=i=>D("delete")),onDelete:v})]),_:1},8,["modelValue"])]),_:1}))}},qe={__name:"user-edit",props:["id","item","package_id"],emits:["close","reload"],setup(L,{emit:g}){var P,F,O,G,_e,pe;const h=L,o=g,u=b([]),d=b([]),_=b([]),T=b([]),D=b(!1),n=b(!0),v=b(!0),m=b(),l=b({mentortutor_email:(P=h.item)==null?void 0:P.tutormentor_email,subject_id:(F=h.item)==null?void 0:F.subject_id,inhouse_id:(O=h.item)==null?void 0:O.inhouse_id,package_id:h.package_id,duration:(G=h.item)==null?void 0:G.duration,notes:(_e=h.item)==null?void 0:_e.notes,pic_id:(pe=h.item)==null?void 0:pe.pic_id}),c=async(C=!1)=>{v.value=!0;const V=C?"api/v1/user/mentor-tutors?inhouse=true":"api/v1/user/mentor-tutors";try{const Y=await A.get(V);Y&&(C?T.value=Object.values(Y):u.value=Y)}catch(Y){console.error(Y)}finally{v.value=!1}},i=async()=>{v.value=!0;try{const C=await A.get("api/v1/package/component/list");C&&(d.value=C)}catch(C){console.error(C)}finally{v.value=!1}},r=()=>{const C=l.value.package_id,V=d.value.findIndex(p=>p.id===C);let Y=d.value[V];Y.detail?(D.value=!0,l.value.duration=Y.detail):(D.value=!1,l.value.duration=null)},f=async()=>{v.value=!0;try{const C=await A.get("api/v1/user/component/list");C&&(_.value=C)}catch(C){console.error(C)}finally{v.value=!1}},N=async()=>{var V,Y;const{valid:C}=await m.value.validate();if(C)try{const p=await A.put("api/v1/timesheet/"+h.id+"/update",l.value);p&&(l.value={mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[]},M("success",p.message,"bottom-end"),o("reload"))}catch(p){if((Y=(V=p==null?void 0:p.response)==null?void 0:V.data)!=null&&Y.errors){const ee=p.response.data.errors;let fe="Validation errors:";for(const te in ee)ee.hasOwnProperty(te)&&(fe+=`
${te}: ${ee[te].join(", ")}`);M("error",fe,"bottom-end")}}finally{o("close")}};return de(()=>{c(!0),i(),f(),setTimeout(()=>{n.value=!1},2e3)}),(C,V)=>{const Y=z("DialogCloseBtn");return x(),U(R,{title:"Edit Detail"},{default:s(()=>[e(Y,{variant:"text",size:"default",onClick:V[0]||(V[0]=p=>o("close"))}),e(j,null,{default:s(()=>[e(ce,{onSubmit:oe(N,["prevent"]),ref_key:"formData",ref:m,"validate-on":"input"},{default:s(()=>[e(K,null,{default:s(()=>[e(k,{md:"8"},{default:s(()=>[e(ae,{variant:"solo",clearable:"",label:"Package",modelValue:t(l).package_id,"onUpdate:modelValue":[V[1]||(V[1]=p=>t(l).package_id=p),r],items:t(d),"item-props":p=>({title:p.package!=null?p.type_of+" - "+p.package:p.type_of}),"item-value":"id",rules:t(S).required,loading:t(v),disabled:t(v)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e(k,{md:"4"},{default:s(()=>[e(B,{type:"number",variant:"solo",clearable:"",label:+t(l).duration/60?"Minutes ("+t(l).duration/60+" Hours)":"Minutes",readonly:t(D),modelValue:t(l).duration,"onUpdate:modelValue":V[2]||(V[2]=p=>t(l).duration=p),rules:t(S).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),e(k,{md:"12"},{default:s(()=>[e(ae,{variant:"solo",clearable:"",modelValue:t(l).inhouse_id,"onUpdate:modelValue":V[3]||(V[3]=p=>t(l).inhouse_id=p),label:"Inhouse Mentor/Tutor",items:t(T),"item-props":p=>({title:p.full_name}),"item-value":"uuid",rules:t(S).required,loading:t(v),disabled:t(v)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e(k,{md:"12"},{default:s(()=>[e(ae,{variant:"solo",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:t(l).pic_id,"onUpdate:modelValue":V[4]||(V[4]=p=>t(l).pic_id=p),items:t(_),"item-title":"full_name","item-value":"id",rules:t(S).required,loading:t(v),disabled:t(v)},null,8,["modelValue","items","rules","loading","disabled"])]),_:1}),e(k,{md:"12"},{default:s(()=>[e(me,{label:"Notes",modelValue:t(l).notes,"onUpdate:modelValue":V[5]||(V[5]=p=>t(l).notes=p),variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1}),e($e,{class:"my-3"}),e(ue,null,{default:s(()=>[e(E,{color:"error",type:"button",onClick:V[6]||(V[6]=p=>o("close"))},{default:s(()=>[e(w,{icon:"ri-close-line",class:"me-3"}),$(" Close ")]),_:1}),e(ne),e(E,{color:"success",type:"submit"},{default:s(()=>[$(" Save "),e(w,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},ze={class:"w-100"},Fe={class:"mt-3 font-weight-light"},Oe=a("hr",{class:"my-2"},null,-1),Ge={key:0},He=a("tr",{class:"bg-secondary"},[a("td",null,"Name"),a("td",null,"School"),a("td",null,"Grade")],-1),We={key:1},Xe=a("td",{width:"20%"},"Name",-1),Ze=a("td",{width:"1%"},":",-1),Je=a("td",null,"School Name",-1),Ke=a("td",{width:"1%"},":",-1),Qe=a("td",null,"Grade",-1),et=a("td",{width:"1%"},":",-1),tt=a("td",null,"Email",-1),lt=a("td",{width:"1%"},":",-1),at={class:"mt-5 font-weight-light"},st=a("hr",{class:"my-2"},null,-1),it=a("td",{width:"20%"},"Program",-1),ot=a("td",{width:"1%"},":",-1),nt=a("td",null,"Package",-1),dt=a("td",{width:"1%"},":",-1),rt=a("td",null,"Person in Charge",-1),ut=a("td",{width:"1%"},":",-1),ct={class:"ms-4",type:"1"},mt=a("td",null,"Tutor/Mentor",-1),_t=a("td",{width:"1%"},":",-1),pt=a("td",null,"Update On",-1),ft=a("td",{width:"1%"},":",-1),vt={class:"d-flex align-end w-100"},yt={class:"m-0 mb-1 text-white"},gt=a("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),ht={class:"text-end w-100"},Vt={class:"d-flex align-end w-100"},bt={class:"m-0 mb-1 text-white"},kt=a("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),wt={class:"text-end w-100"},xt={class:"d-flex align-end w-100"},Dt={class:"m-0 mb-1 text-white"},Ct=a("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),$t={class:"text-end w-100"},Mt={__name:"user-detail",props:{id:String},setup(L){const g=L,h=Q("reloadData"),o=Q("updateReload"),u=b([]),d=b([{edit:!1,delete:!1}]),_=b(!1),T=async m=>{var l,c,i;_.value=!0;try{const r=await A.get("api/v1/timesheet/"+m+"/detail");r&&(u.value=r)}catch(r){((l=r.response)==null?void 0:l.status)==400&&(M("error",(i=(c=r.response)==null?void 0:c.data)==null?void 0:i.errors,"bottom-end"),ve.push("/admin/timesheet")),console.log(r)}finally{_.value=!1}},D=async()=>{var m,l,c;try{const i=await A.delete("api/v1/timesheet/"+g.id+"/delete");i&&(u.value=i,M("success",i.message,"bottom-end"),d.value.delete=!1,ve.push("/admin/timesheet"))}catch(i){((m=i.response)==null?void 0:m.status)==400&&M("error",(c=(l=i.response)==null?void 0:l.data)==null?void 0:c.errors,"bottom-end")}},n=m=>{d.value[m]?d.value[m]=!1:d.value[m]=!0},v=async(m,l)=>{var c;xe();try{const i=await A.get("api/v1/timesheet/"+m+"/export",{responseType:"blob"});if(i){const r=window.URL.createObjectURL(new Blob([i],{type:'"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"'})),f=document.createElement("a");f.href=r,f.setAttribute("download",`timesheet_${l}.xlsx`),document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(r),De.close()}}catch(i){M("error",(c=i.response)==null?void 0:c.statusText,"bottom-end"),console.log(i)}};return de(()=>{T(g.id)}),Ve(()=>{h.value&&(T(g.id),o(!1))}),(m,l)=>{const c=z("router-link");return x(),U(R,{class:"mb-3"},{default:s(()=>[e(W,{class:"d-flex justify-between align-center"},{default:s(()=>{var i;return[a("div",ze,[e(c,{to:"/admin/timesheet"},{default:s(()=>[e(w,{icon:"ri-arrow-left-line",color:"secondary",class:"me-2",size:"25"})]),_:1}),$(" Timesheet - "+y((i=t(u).packageDetails)==null?void 0:i.package_type),1)]),a("div",null,[e(be,{"close-on-content-click":!1,location:"bottom"},{activator:s(({props:r})=>[H((x(),U(E,ke({color:"secondary"},r),{default:s(()=>[e(w,{icon:"ri-settings-3-line"})]),_:2},1040)),[[Z,"Settings","start"]])]),default:s(()=>[e(Me,null,{default:s(()=>[e(se,null,{default:s(()=>[a("div",{class:"cursor-pointer",onClick:l[0]||(l[0]=r=>n("edit"))},[e(w,{icon:"ri-pencil-line",class:"me-2"}),$(" Edit TimeSheet ")])]),_:1}),e(se,null,{default:s(()=>[e(Te,null,{default:s(()=>[a("div",{class:"cursor-pointer",onClick:l[1]||(l[1]=r=>{var f,N,P,F,O,G;return v(g.id,((N=(f=t(u))==null?void 0:f.packageDetails)==null?void 0:N.package_type)+"-"+((F=(P=t(u))==null?void 0:P.packageDetails)==null?void 0:F.package_name)+"_"+((G=(O=t(u))==null?void 0:O.packageDetails)==null?void 0:G.tutormentor_name))})},[e(w,{icon:"ri-download-line",class:"me-2"}),$(" Download TimeSheet ")])]),_:1})]),_:1}),e(se,null,{default:s(()=>[a("div",{class:"cursor-pointer",onClick:l[2]||(l[2]=r=>n("delete"))},[e(w,{icon:"ri-delete-bin-line",class:"me-2"}),$(" Delete TimeSheet ")])]),_:1})]),_:1})]),_:1})])]}),_:1}),e(j,null,{default:s(()=>[t(_)?(x(),U(K,{key:1},{default:s(()=>[e(k,{md:"7"},{default:s(()=>[e(X,{type:"heading, paragraph, heading, paragraph",class:"mb-3"})]),_:1}),e(k,{md:"5"},{default:s(()=>[e(X,{type:"text@3",color:"#16B1FF",class:"mb-3"}),e(X,{type:"text@3",color:"#91c45e",class:"mb-3"}),e(X,{type:"text@3",color:"#e05e5e",class:"mb-3"})]),_:1})]),_:1})):(x(),U(K,{key:0,align:"center"},{default:s(()=>[e(k,{md:"7"},{default:s(()=>[a("h4",Fe,[e(w,{icon:"ri-user-line",size:"17",class:"me-2"}),$(" Basic Profile ")]),Oe,e(ie,{density:"compact"},{default:s(()=>{var i,r;return[((i=t(u).clientProfile)==null?void 0:i.length)>1?(x(),q("tbody",Ge,[He,(x(!0),q(re,null,he(t(u).clientProfile,f=>(x(),q("tr",null,[a("td",null,y(f.client_name),1),a("td",null,y(f.client_school),1),a("td",null,y(f.client_grade),1)]))),256))])):((r=t(u).clientProfile)==null?void 0:r.length)==1?(x(),q("tbody",We,[a("tr",null,[Xe,Ze,a("td",null,y(t(u).clientProfile[0].client_name),1)]),a("tr",null,[Je,Ke,a("td",null,y(t(u).clientProfile[0].client_school),1)]),a("tr",null,[Qe,et,a("td",null,y(t(u).clientProfile[0].client_grade),1)]),a("tr",null,[tt,lt,a("td",null,y(t(u).clientProfile[0].client_mail),1)])])):we("",!0)]}),_:1}),a("h4",at,[e(w,{icon:"ri-bookmark-line",class:"me-2",size:"17"}),$(" Package Details ")]),st,e(ie,{density:"compact"},{default:s(()=>{var i,r,f,N,P;return[a("tbody",null,[a("tr",null,[it,ot,a("td",null,y((i=t(u).packageDetails)==null?void 0:i.program_name),1)]),a("tr",null,[nt,dt,a("td",null,y(((r=t(u).packageDetails)==null?void 0:r.package_type)+" - "+((f=t(u).packageDetails)==null?void 0:f.package_name)),1)]),a("tr",null,[rt,ut,a("td",null,[a("ol",ct,[a("li",null,y((N=t(u).packageDetails)==null?void 0:N.pic_name),1)])])]),a("tr",null,[mt,_t,a("td",null,y((P=t(u).packageDetails)==null?void 0:P.tutormentor_name),1)]),a("tr",null,[pt,ft,a("td",null,y(t(I)().format("LLL")),1)])])]}),_:1})]),_:1}),e(k,{md:"5"},{default:s(()=>[e(R,{color:"#16B1FF",class:"mb-2 d-flex align-center"},{default:s(()=>[a("div",null,[e(le,null,{default:s(()=>[e(W,{class:"text-white"},{default:s(()=>[$(" Total Minutes of Package ")]),_:1})]),_:1}),e(j,{class:"d-flex justify-between"},{default:s(()=>{var i;return[a("div",vt,[a("h1",yt,y((i=t(u).packageDetails)==null?void 0:i.duration_in_minutes),1),gt])]}),_:1})]),e(j,null,{default:s(()=>[a("div",ht,[e(w,{icon:"ri-calendar-schedule-line",size:"60"})])]),_:1})]),_:1}),e(R,{color:"#91c45e",class:"mb-2 d-flex align-center"},{default:s(()=>[a("div",null,[e(le,null,{default:s(()=>[e(W,{class:"text-white"},{default:s(()=>[$(" Total Minutes Spent ")]),_:1})]),_:1}),e(j,{class:"d-flex justify-between"},{default:s(()=>{var i;return[a("div",Vt,[a("h1",bt,y((i=t(u).packageDetails)==null?void 0:i.time_spent_in_minutes),1),kt])]}),_:1})]),e(j,null,{default:s(()=>[a("div",wt,[e(w,{icon:"ri-timer-flash-line",size:"60",color:"white"})])]),_:1})]),_:1}),e(R,{color:"#e05e5e",class:"mb-2 d-flex align-center"},{default:s(()=>[a("div",null,[e(le,null,{default:s(()=>[e(W,{class:"text-white"},{default:s(()=>[$(" Total Minutes Left ")]),_:1})]),_:1}),e(j,{class:"d-flex justify-between"},{default:s(()=>{var i,r;return[a("div",xt,[a("h1",Dt,y(((i=t(u).packageDetails)==null?void 0:i.duration_in_minutes)-((r=t(u).packageDetails)==null?void 0:r.time_spent_in_minutes)),1),Ct])]}),_:1})]),e(j,null,{default:s(()=>[a("div",$t,[e(w,{icon:"ri-timer-2-line",size:"60"})])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),e(J,{modelValue:t(d).edit,"onUpdate:modelValue":l[5]||(l[5]=i=>t(d).edit=i),"max-width":"600",persistent:""},{default:s(()=>{var i;return[e(qe,{item:t(u).editableColumns,package_id:(i=t(u).packageDetails)==null?void 0:i.package_id,id:g.id,onClose:l[3]||(l[3]=r=>n("edit")),onReload:l[4]||(l[4]=r=>T(g.id))},null,8,["item","package_id","id"])]}),_:1},8,["modelValue"]),e(J,{modelValue:t(d).delete,"onUpdate:modelValue":l[7]||(l[7]=i=>t(d).delete=i),"max-width":"400",persistent:""},{default:s(()=>[e(ge,{title:"timesheet",onDelete:D,onClose:l[6]||(l[6]=i=>n("delete"))})]),_:1},8,["modelValue"])]),_:1})}}},Zt={__name:"timesheet-detail",props:{id:Number},setup(L){const h=L.id,o=b(!1);return ye("reloadData",o),ye("updateReload",u=>{o.value=u}),(u,d)=>(x(),q(re,null,[e(Mt,{id:t(h)},null,8,["id"]),e(Ie,{id:t(h)},null,8,["id"])],64))}};export{Zt as default};
