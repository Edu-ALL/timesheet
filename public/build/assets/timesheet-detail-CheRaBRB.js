import{_ as ge}from"./DeleteHandler.vue_vue_type_script_setup_true_lang-thnimToi.js";import{r as k,l as z,o as D,f as U,w as s,b as e,Z as oe,W as B,u as t,v as I,Y as E,V as x,j as M,m as ne,A,s as T,$ as Q,t as g,e as de,a as l,x as H,c as q,X as he,F as re,a0 as Ve,i as be,P as ke,h as we,k as ve,a1 as xe,a2 as De,a3 as ye}from"./main-D1lPvMDo.js";import{r as S}from"./rules-B5G8qOzK.js";import{a as j,c as ue,V as R,b as W,d as le}from"./VCard-DC8ALxF4.js";import{V as ce}from"./VForm-C5Cqnuu0.js";import{V as K,a as w}from"./VRow-9ZFh_UJX.js";import{V as me}from"./VTextarea-5XBp4ecw.js";import{V as J}from"./VDialog-CP4J8W5C.js";import{a as ie,V as X}from"./VTable-CI5gGq3-.js";import{T as Z}from"./index-DW6yjLqd.js";import{V as Ce}from"./VCheckbox-BWt_z310.js";import{V as ae}from"./VAutocomplete-CJrF-7vM.js";import{V as $e}from"./VDivider-Bw9dI5dX.js";import{V as Me,a as se,b as Te}from"./VList-B1yCmFNz.js";import"./VAvatar-Bl5h7-NL.js";import"./VImg-ByJrDX5C.js";import"./VTooltip-COmJNTsw.js";import"./VCheckboxBtn-yXXECy3J.js";import"./VSelectionControl-DRQIRjKh.js";import"./VSlideGroup-BDh968rI.js";import"./ssrBoot-KIR6BrcX.js";const Se={__name:"activity-add",props:{id:String},emits:["close","reload"],setup(L,{emit:h}){const V=L,o=h,c=k(),d=k({activity:null,description:null,date:null,start_time:null,end_time:null,start_date:null,end_date:null,meeting_link:null}),f=async()=>{var m,_;const{valid:C}=await c.value.validate();if(C)try{const p=await A.post("api/v1/timesheet/"+V.id+"/activity",d.value);p&&T("success",p.message,"bottom-end")}catch(p){if((_=(m=p==null?void 0:p.response)==null?void 0:m.data)!=null&&_.errors){const n=p.response.data.errors;let a="Validation errors:";for(const u in n)n.hasOwnProperty(u)&&(a+=`
${u}: ${n[u].join(", ")}`);T("error",a,"bottom-end")}else T("error",p.response.data.message,"bottom-end")}finally{o("reload"),o("close")}};return(C,m)=>{const _=z("DialogCloseBtn"),p=z("VDateInput");return D(),U(R,{title:"New Activity"},{default:s(()=>[e(_,{variant:"text",size:"default",onClick:m[0]||(m[0]=n=>o("close"))}),e(j,null,{default:s(()=>[e(ce,{onSubmit:oe(f,["prevent"]),ref_key:"formData",ref:c,"validate-on":"input"},{default:s(()=>[e(K,null,{default:s(()=>[e(w,{cols:"12"},{default:s(()=>[e(B,{modelValue:t(d).activity,"onUpdate:modelValue":m[1]||(m[1]=n=>t(d).activity=n),label:"Activity Name",placeholder:"Activity",variant:"solo",rules:t(S).required},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:s(()=>[e(me,{modelValue:t(d).description,"onUpdate:modelValue":m[2]||(m[2]=n=>t(d).description=n),label:"Description",placeholder:"Description",variant:"solo",rules:t(S).required},null,8,["modelValue","rules"])]),_:1}),e(w,{md:"6",cols:"12"},{default:s(()=>[e(p,{modelValue:t(d).date,"onUpdate:modelValue":m[3]||(m[3]=n=>t(d).date=n),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(S).required},null,8,["modelValue","rules"])]),_:1}),e(w,{md:"3",cols:"6"},{default:s(()=>[e(B,{type:"time",modelValue:t(d).start_time,"onUpdate:modelValue":m[4]||(m[4]=n=>t(d).start_time=n),label:"Start Time",placeholder:"Start Time",rules:t(S).required,variant:"solo",class:"mb-3",onChange:m[5]||(m[5]=n=>t(d).start_date=t(I)(t(d).date).format("YYYY-MM-DD")+" "+t(d).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e(w,{md:"3",cols:"6"},{default:s(()=>[e(B,{type:"time",modelValue:t(d).end_time,"onUpdate:modelValue":m[6]||(m[6]=n=>t(d).end_time=n),label:"End Time",placeholder:"End Time",variant:"solo",onChange:m[7]||(m[7]=n=>t(d).end_date=t(I)(t(d).date).format("YYYY-MM-DD")+" "+t(d).end_time+":00")},null,8,["modelValue"])]),_:1}),e(w,{md:"12",cols:"12"},{default:s(()=>[e(B,{type:"text",modelValue:t(d).meeting_link,"onUpdate:modelValue":m[8]||(m[8]=n=>t(d).meeting_link=n),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(S).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(ue,{class:"mt-5"},{default:s(()=>[e(E,{type:"button",color:"error",onClick:m[9]||(m[9]=n=>o("close"))},{default:s(()=>[e(x,{icon:"ri-close-line",class:"me-3"}),M(" Close ")]),_:1}),e(ne),e(E,{type:"submit",color:"success"},{default:s(()=>[M(" Save "),e(x,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Ye={__name:"activity-edit",props:{timesheet_id:Number,activity:String},emits:["close","reload"],setup(L,{emit:h}){const V=k(),o=L,c=h,d=Q("updateReload"),f=k({activity:o==null?void 0:o.activity.activity,description:o==null?void 0:o.activity.description,date:new Date(o==null?void 0:o.activity.start_date),start_time:o==null?void 0:o.activity.start_time,end_time:o==null?void 0:o.activity.end_time,start_date:I(o==null?void 0:o.activity.start_date).format("YYYY-MM-DD")+" "+(o==null?void 0:o.activity.start_time)+":00",end_date:(o==null?void 0:o.activity.end_time)!=0?I(o==null?void 0:o.activity.start_date).format("YYYY-MM-DD")+" "+(o==null?void 0:o.activity.end_time)+":00":null,meeting_link:o==null?void 0:o.activity.meeting_link}),C=async()=>{var _,p;const{valid:m}=await V.value.validate();if(m)try{const n=await A.put("api/v1/timesheet/"+o.timesheet_id+"/activity/"+o.activity.id,f.value);n&&(T("success",n.message,"bottom-end"),c("reload"))}catch(n){if((p=(_=n==null?void 0:n.response)==null?void 0:_.data)!=null&&p.errors){const a=n.response.data.errors;let u="Validation errors:";if(typeof a!="string"){for(const i in a)a.hasOwnProperty(i)&&(u+=`
${i}: ${a[i].join(", ")}`);T("error",u,"bottom-end")}else T("error",n.response.data.errors,"bottom-end")}}finally{c("close"),setTimeout(()=>{d(!0)},3e3)}};return(m,_)=>{const p=z("DialogCloseBtn"),n=z("VDateInput");return D(),U(R,{title:"Edit Activity"},{default:s(()=>[e(p,{variant:"text",size:"default",onClick:_[0]||(_[0]=a=>c("close"))}),e(j,null,{default:s(()=>[e(ce,{onSubmit:oe(C,["prevent"]),ref_key:"formData",ref:V,"validate-on":"input"},{default:s(()=>[e(K,null,{default:s(()=>[e(w,{cols:"12"},{default:s(()=>[e(B,{modelValue:t(f).activity,"onUpdate:modelValue":_[1]||(_[1]=a=>t(f).activity=a),label:"Activity Name",rules:t(S).required,placeholder:"Activity",variant:"solo"},null,8,["modelValue","rules"])]),_:1}),e(w,{cols:"12"},{default:s(()=>[e(me,{modelValue:t(f).description,"onUpdate:modelValue":_[2]||(_[2]=a=>t(f).description=a),label:"Description",rules:t(S).required,placeholder:"Description",variant:"solo"},null,8,["modelValue","rules"])]),_:1}),e(w,{md:"6",cols:"12"},{default:s(()=>[M(g(m.activityDate)+" ",1),e(n,{modelValue:t(f).date,"onUpdate:modelValue":_[3]||(_[3]=a=>t(f).date=a),label:"Date",placeholder:"Select Date","prepend-icon":"",variant:"solo",rules:t(S).required},null,8,["modelValue","rules"])]),_:1}),e(w,{md:"3",cols:"6"},{default:s(()=>[e(B,{type:"time",modelValue:t(f).start_time,"onUpdate:modelValue":_[4]||(_[4]=a=>t(f).start_time=a),label:"Start Time",rules:t(S).required,placeholder:"Start Time",variant:"solo",onChange:_[5]||(_[5]=a=>t(f).start_date=t(I)(o==null?void 0:o.activity.date).format("YYYY-MM-DD")+" "+t(f).start_time+":00")},null,8,["modelValue","rules"])]),_:1}),e(w,{md:"3",cols:"6"},{default:s(()=>[e(B,{type:"time",modelValue:t(f).end_time,"onUpdate:modelValue":_[6]||(_[6]=a=>t(f).end_time=a),label:"End Time",placeholder:"End Time",variant:"solo",onChange:_[7]||(_[7]=a=>t(f).end_date=t(I)(o==null?void 0:o.activity.date).format("YYYY-MM-DD")+" "+t(f).end_time+":00")},null,8,["modelValue"])]),_:1}),e(w,{md:"12",cols:"12"},{default:s(()=>[e(B,{type:"text",modelValue:t(f).meeting_link,"onUpdate:modelValue":_[8]||(_[8]=a=>t(f).meeting_link=a),label:"Meeting Link",placeholder:"Meeting Link",variant:"solo",rules:t(S).url},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(ue,{class:"mt-5"},{default:s(()=>[e(E,{color:"error",onClick:_[9]||(_[9]=a=>c("close"))},{default:s(()=>[e(x,{icon:"ri-close-line",class:"me-3"}),M(" Close ")]),_:1}),e(ne),e(E,{color:"success",type:"submit"},{default:s(()=>[M(" Save "),e(x,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},Ue={class:"d-flex justify-between align-center"},Pe=l("div",{class:"w-100"},[l("h4",null,"Activity")],-1),Ae=l("thead",null,[l("tr",null,[l("th",{class:"text-uppercase",width:"1%"}," No "),l("th",{class:"text-uppercase text-center"},"Activity"),l("th",{class:"text-uppercase text-center"},"Description"),l("th",{class:"text-uppercase text-center"},"Date"),l("th",{class:"text-uppercase text-center"},"Start Time"),l("th",{class:"text-uppercase text-center"},"End Time"),l("th",{class:"text-uppercase text-center"},"Time Spent"),l("th",{class:"text-uppercase text-center"},"Status"),l("th",{class:"text-uppercase text-end"},"#")])],-1),Le={width:"1%"},je={class:"text-center"},Ne={class:"text-center"},Ee={class:"text-center"},Be={class:"text-center"},Re={class:"text-end"},Ie={__name:"timesheet-detail",props:{id:String},setup(L){const h=L,V=Q("updateReload"),o=k([]),c=k(!1),d=k([{add:!1,edit:!1,delete:!1}]),f=k([]),C=async()=>{c.value=!0;try{const a=await A.get("api/v1/timesheet/"+h.id+"/activities");a&&(o.value=a)}catch(a){console.error(a)}finally{c.value=!1}},m=a=>{d.value[a]?d.value[a]=!1:d.value[a]=!0},_=(a,u)=>{f.value=u,m(a)},p=async()=>{var a,u,i;try{const r=await A.delete("api/v1/timesheet/"+h.id+"/activity/"+f.value.id);r&&(T("success",r.message,"bottom-end"),m("delete"))}catch(r){((a=r.response)==null?void 0:a.status)==400&&T("error",(i=(u=r.response)==null?void 0:u.data)==null?void 0:i.errors,"bottom-end")}finally{C(),V(!0)}},n=async a=>{var u,i;try{const r=await A.put("api/v1/timesheet/"+h.id+"/activity/"+a.id,a);r&&T("success",r.message,"bottom-end")}catch(r){if((i=(u=r==null?void 0:r.response)==null?void 0:u.data)!=null&&i.errors){const y=r.response.data.errors;let N="Validation errors:";if(typeof y!="string"){for(const P in y)y.hasOwnProperty(P)&&(N+=`
${P}: ${y[P].join(", ")}`);T("error",N,"bottom-end")}else T("error",r.response.data.errors,"bottom-end")}}finally{C(),V(!0)}};return de(()=>{C()}),(a,u)=>(D(),U(R,null,{default:s(()=>[e(W,null,{default:s(()=>[l("div",Ue,[Pe,H((D(),U(E,{onClick:u[0]||(u[0]=i=>m("add"))},{default:s(()=>[e(x,{icon:"ri-add-line"})]),_:1})),[[Z,"New Activity","start"]]),e(J,{modelValue:t(d).add,"onUpdate:modelValue":u[2]||(u[2]=i=>t(d).add=i),"max-width":"600",persistent:""},{default:s(()=>[e(Se,{id:h.id,onClose:u[1]||(u[1]=i=>m("add")),onReload:C},null,8,["id"])]),_:1},8,["modelValue"])])]),_:1}),e(j,null,{default:s(()=>[t(c)?(D(),U(X,{key:1,type:"table"})):(D(),U(ie,{key:0,class:"text-no-wrap",height:"400","fixed-header":""},{default:s(()=>[Ae,l("tbody",null,[(D(!0),q(re,null,he(t(o),(i,r)=>(D(),q("tr",{key:r},[l("td",Le,g(r+1),1),l("td",null,g(i.activity),1),l("td",je,g(i.description),1),l("td",null,g(a.$moment(i.start_date).format("MMM Do YYYY")),1),l("td",Ne,g(i.start_time),1),l("td",Ee,g(i.end_time),1),l("td",Be,[e(x,{icon:"ri-timer-2-line",class:"cursor-pointer me-3"}),M(" "+g(i.estimate)+" Minutes ",1)]),l("td",null,[H(e(Ce,{color:"success",modelValue:i.status,"onUpdate:modelValue":[y=>i.status=y,y=>n(i)],value:1,"false-value":0},null,8,["modelValue","onUpdate:modelValue"]),[[Z,i.status?"Completed":"Not Yet","start"]])]),l("td",Re,[H((D(),U(E,{color:"warning",density:"compact",class:"me-1",onClick:y=>_("edit",i)},{default:s(()=>[e(x,{icon:"ri-edit-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[Z,"Edit Activity","start"]]),H((D(),U(E,{color:"error",density:"compact",onClick:y=>_("delete",i)},{default:s(()=>[e(x,{icon:"ri-delete-bin-line",class:"cursor-pointer"})]),_:2},1032,["onClick"])),[[Z,"Delete Activity","start"]])])]))),128))])]),_:1}))]),_:1}),e(J,{modelValue:t(d).edit,"onUpdate:modelValue":u[4]||(u[4]=i=>t(d).edit=i),"max-width":"600",persistent:""},{default:s(()=>[e(Ye,{timesheet_id:h==null?void 0:h.id,activity:t(f),onClose:u[3]||(u[3]=i=>m("edit")),onReload:C},null,8,["timesheet_id","activity"])]),_:1},8,["modelValue"]),e(J,{modelValue:t(d).delete,"onUpdate:modelValue":u[6]||(u[6]=i=>t(d).delete=i),"max-width":"400",persistent:""},{default:s(()=>[e(ge,{title:"activity",onClose:u[5]||(u[5]=i=>m("delete")),onDelete:p})]),_:1},8,["modelValue"])]),_:1}))}},qe={__name:"user-edit",props:["id","item","package_id"],emits:["close","reload"],setup(L,{emit:h}){var P,F,O,G,_e,pe;const V=L,o=h,c=k([]),d=k([]),f=k([]),C=k([]),m=k(!1),_=k(!0),p=k(!0),n=k(),a=k({mentortutor_email:(P=V.item)==null?void 0:P.tutormentor_email,subject_id:(F=V.item)==null?void 0:F.subject_id,inhouse_id:(O=V.item)==null?void 0:O.inhouse_id,package_id:V.package_id,duration:(G=V.item)==null?void 0:G.duration,notes:(_e=V.item)==null?void 0:_e.notes,pic_id:(pe=V.item)==null?void 0:pe.pic_id}),u=async($=!1)=>{p.value=!0;const b=$?"api/v1/user/mentor-tutors?inhouse=true":"api/v1/user/mentor-tutors";try{const Y=await A.get(b);Y&&($?C.value=Object.values(Y):c.value=Y)}catch(Y){console.error(Y)}finally{p.value=!1}},i=async()=>{p.value=!0;try{const $=await A.get("api/v1/package/component/list");$&&(d.value=$)}catch($){console.error($)}finally{p.value=!1}},r=()=>{const $=a.value.package_id,b=d.value.findIndex(v=>v.id===$);let Y=d.value[b];Y.detail?(m.value=!0,a.value.duration=Y.detail):(m.value=!1,a.value.duration=null)},y=async()=>{p.value=!0;try{const $=await A.get("api/v1/user/component/list");$&&(f.value=$)}catch($){console.error($)}finally{p.value=!1}},N=async()=>{var b,Y;const{valid:$}=await n.value.validate();if($)try{const v=await A.put("api/v1/timesheet/"+V.id+"/update",a.value);v&&(a.value={mentortutor_email:null,subject_id:null,inhouse_id:null,package_id:null,duration:"",notes:"",pic_id:[]},T("success",v.message,"bottom-end"),o("reload"))}catch(v){if((Y=(b=v==null?void 0:v.response)==null?void 0:b.data)!=null&&Y.errors){const ee=v.response.data.errors;let fe="Validation errors:";for(const te in ee)ee.hasOwnProperty(te)&&(fe+=`
${te}: ${ee[te].join(", ")}`);T("error",fe,"bottom-end")}}finally{o("close")}};return de(()=>{u(!0),i(),y(),setTimeout(()=>{_.value=!1},2e3)}),($,b)=>{const Y=z("DialogCloseBtn");return D(),U(R,{title:"Edit Detail"},{default:s(()=>[e(Y,{variant:"text",size:"default",onClick:b[0]||(b[0]=v=>o("close"))}),e(j,null,{default:s(()=>[e(ce,{onSubmit:oe(N,["prevent"]),ref_key:"formData",ref:n,"validate-on":"input"},{default:s(()=>[e(K,null,{default:s(()=>[e(w,{md:"8"},{default:s(()=>[e(ae,{variant:"solo",clearable:"",label:"Package",modelValue:t(a).package_id,"onUpdate:modelValue":[b[1]||(b[1]=v=>t(a).package_id=v),r],items:t(d),"item-props":v=>({title:v.package!=null?v.type_of+" - "+v.package:v.type_of}),"item-value":"id",rules:t(S).required,loading:t(p),disabled:t(p)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e(w,{md:"4"},{default:s(()=>[e(B,{type:"number",variant:"solo",clearable:"",label:+t(a).duration/60?"Minutes ("+t(a).duration/60+" Hours)":"Minutes",readonly:t(m),modelValue:t(a).duration,"onUpdate:modelValue":b[2]||(b[2]=v=>t(a).duration=v),rules:t(S).required},null,8,["label","readonly","modelValue","rules"])]),_:1}),e(w,{md:"12"},{default:s(()=>[e(ae,{variant:"solo",clearable:"",modelValue:t(a).inhouse_id,"onUpdate:modelValue":b[3]||(b[3]=v=>t(a).inhouse_id=v),label:"Inhouse Mentor/Tutor",items:t(C),"item-props":v=>({title:v.full_name}),"item-value":"uuid",rules:t(S).required,loading:t(p),disabled:t(p)},null,8,["modelValue","items","item-props","rules","loading","disabled"])]),_:1}),e(w,{md:"12"},{default:s(()=>[e(ae,{variant:"solo",multiple:"",clearable:"",chips:"",label:"PIC",modelValue:t(a).pic_id,"onUpdate:modelValue":b[4]||(b[4]=v=>t(a).pic_id=v),items:t(f),"item-title":"full_name","item-value":"id",rules:t(S).required,loading:t(p),disabled:t(p)},null,8,["modelValue","items","rules","loading","disabled"])]),_:1}),e(w,{md:"12"},{default:s(()=>[e(me,{label:"Notes",modelValue:t(a).notes,"onUpdate:modelValue":b[5]||(b[5]=v=>t(a).notes=v),variant:"solo"},null,8,["modelValue"])]),_:1})]),_:1}),e($e,{class:"my-3"}),e(ue,null,{default:s(()=>[e(E,{color:"error",type:"button",onClick:b[6]||(b[6]=v=>o("close"))},{default:s(()=>[e(x,{icon:"ri-close-line",class:"me-3"}),M(" Close ")]),_:1}),e(ne),e(E,{color:"success",type:"submit"},{default:s(()=>[M(" Save "),e(x,{icon:"ri-save-line",class:"ms-3"})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})}}},ze={class:"w-100"},Fe={class:"mt-3 font-weight-light"},Oe=l("hr",{class:"my-2"},null,-1),Ge={key:0},He=l("tr",{class:"bg-secondary"},[l("td",null,"Name"),l("td",null,"School"),l("td",null,"Grade")],-1),We={key:1},Xe=l("td",{width:"20%"},"Name",-1),Ze=l("td",{width:"1%"},":",-1),Je=l("td",null,"School Name",-1),Ke=l("td",{width:"1%"},":",-1),Qe=l("td",null,"Grade",-1),et=l("td",{width:"1%"},":",-1),tt=l("td",null,"Email",-1),lt=l("td",{width:"1%"},":",-1),at={class:"mt-5 font-weight-light"},st=l("hr",{class:"my-2"},null,-1),it=l("td",{width:"20%"},"Program",-1),ot=l("td",{width:"1%"},":",-1),nt=l("td",null,"Package",-1),dt=l("td",{width:"1%"},":",-1),rt=l("td",null,"Person in Charge",-1),ut=l("td",{width:"1%"},":",-1),ct={class:"ms-4",type:"1"},mt=l("td",null,"Tutor/Mentor",-1),_t=l("td",{width:"1%"},":",-1),pt=l("td",null,"Update On",-1),ft=l("td",{width:"1%"},":",-1),vt={class:"d-flex align-end w-100"},yt={class:"m-0 mb-1 text-white"},gt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),ht={class:"text-end w-100"},Vt={class:"d-flex align-end w-100"},bt={class:"m-0 mb-1 text-white"},kt=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),wt={class:"text-end w-100"},xt={class:"d-flex align-end w-100"},Dt={class:"m-0 mb-1 text-white"},Ct=l("h4",{class:"m-0 ms-2 text-white"},"Minutes",-1),$t={class:"text-end w-100"},Mt={__name:"user-detail",props:{id:String},setup(L){const h=L,V=Q("reloadData"),o=Q("updateReload"),c=k([]),d=k([{edit:!1,delete:!1}]),f=k(!1),C=async n=>{var a,u,i;f.value=!0;try{const r=await A.get("api/v1/timesheet/"+n+"/detail");r&&(c.value=r)}catch(r){((a=r.response)==null?void 0:a.status)==400&&(T("error",(i=(u=r.response)==null?void 0:u.data)==null?void 0:i.errors,"bottom-end"),ve.push("/admin/timesheet")),console.log(r)}finally{f.value=!1}},m=async()=>{var n,a,u;try{const i=await A.delete("api/v1/timesheet/"+h.id+"/delete");i&&(c.value=i,T("success",i.message,"bottom-end"),d.value.delete=!1,ve.push("/admin/timesheet"))}catch(i){((n=i.response)==null?void 0:n.status)==400&&T("error",(u=(a=i.response)==null?void 0:a.data)==null?void 0:u.errors,"bottom-end")}},_=n=>{d.value[n]?d.value[n]=!1:d.value[n]=!0},p=async(n,a)=>{var u;xe();try{const i=await A.get("api/v1/timesheet/"+n+"/export",{responseType:"blob"});if(i){const r=window.URL.createObjectURL(new Blob([i],{type:'"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"'})),y=document.createElement("a");y.href=r,y.setAttribute("download",`timesheet_${a}.xlsx`),document.body.appendChild(y),y.click(),document.body.removeChild(y),window.URL.revokeObjectURL(r),De.close()}}catch(i){T("error",(u=i.response)==null?void 0:u.statusText,"bottom-end"),console.log(i)}};return de(()=>{C(h.id)}),Ve(()=>{V.value&&(C(h.id),o(!1))}),(n,a)=>{const u=z("router-link");return D(),U(R,{class:"mb-3"},{default:s(()=>[e(W,{class:"d-flex justify-between align-center"},{default:s(()=>{var i;return[l("div",ze,[e(u,{to:"/admin/timesheet"},{default:s(()=>[e(x,{icon:"ri-arrow-left-line",color:"secondary",class:"me-2",size:"25"})]),_:1}),M(" Timesheet - "+g((i=t(c).packageDetails)==null?void 0:i.package_type),1)]),l("div",null,[e(be,{"close-on-content-click":!1,location:"bottom"},{activator:s(({props:r})=>[H((D(),U(E,ke({color:"secondary"},r),{default:s(()=>[e(x,{icon:"ri-settings-3-line"})]),_:2},1040)),[[Z,"Settings","start"]])]),default:s(()=>[e(Me,null,{default:s(()=>[e(se,null,{default:s(()=>[l("div",{class:"cursor-pointer",onClick:a[0]||(a[0]=r=>_("edit"))},[e(x,{icon:"ri-pencil-line",class:"me-2"}),M(" Edit TimeSheet ")])]),_:1}),e(se,null,{default:s(()=>[e(Te,null,{default:s(()=>[l("div",{class:"cursor-pointer",onClick:a[1]||(a[1]=r=>{var y,N,P,F,O,G;return p(h.id,((N=(y=t(c))==null?void 0:y.packageDetails)==null?void 0:N.package_type)+"-"+((F=(P=t(c))==null?void 0:P.packageDetails)==null?void 0:F.package_name)+"_"+((G=(O=t(c))==null?void 0:O.packageDetails)==null?void 0:G.tutormentor_name))})},[e(x,{icon:"ri-download-line",class:"me-2"}),M(" Download TimeSheet ")])]),_:1})]),_:1}),e(se,null,{default:s(()=>[l("div",{class:"cursor-pointer",onClick:a[2]||(a[2]=r=>_("delete"))},[e(x,{icon:"ri-delete-bin-line",class:"me-2"}),M(" Delete TimeSheet ")])]),_:1})]),_:1})]),_:1})])]}),_:1}),e(j,null,{default:s(()=>[t(f)?(D(),U(K,{key:1},{default:s(()=>[e(w,{md:"7"},{default:s(()=>[e(X,{type:"heading, paragraph, heading, paragraph",class:"mb-3"})]),_:1}),e(w,{md:"5"},{default:s(()=>[e(X,{type:"text@3",color:"#16B1FF",class:"mb-3"}),e(X,{type:"text@3",color:"#91c45e",class:"mb-3"}),e(X,{type:"text@3",color:"#e05e5e",class:"mb-3"})]),_:1})]),_:1})):(D(),U(K,{key:0,align:"center"},{default:s(()=>[e(w,{md:"7"},{default:s(()=>[l("h4",Fe,[e(x,{icon:"ri-user-line",size:"17",class:"me-2"}),M(" Basic Profile ")]),Oe,e(ie,{density:"compact"},{default:s(()=>{var i,r;return[((i=t(c).clientProfile)==null?void 0:i.length)>1?(D(),q("tbody",Ge,[He,(D(!0),q(re,null,he(t(c).clientProfile,y=>(D(),q("tr",null,[l("td",null,g(y.client_name),1),l("td",null,g(y.client_school),1),l("td",null,g(y.client_grade),1)]))),256))])):((r=t(c).clientProfile)==null?void 0:r.length)==1?(D(),q("tbody",We,[l("tr",null,[Xe,Ze,l("td",null,g(t(c).clientProfile[0].client_name),1)]),l("tr",null,[Je,Ke,l("td",null,g(t(c).clientProfile[0].client_school),1)]),l("tr",null,[Qe,et,l("td",null,g(t(c).clientProfile[0].client_grade),1)]),l("tr",null,[tt,lt,l("td",null,g(t(c).clientProfile[0].client_mail),1)])])):we("",!0)]}),_:1}),l("h4",at,[e(x,{icon:"ri-bookmark-line",class:"me-2",size:"17"}),M(" Package Details ")]),st,e(ie,{density:"compact"},{default:s(()=>{var i,r,y,N,P;return[l("tbody",null,[l("tr",null,[it,ot,l("td",null,g((i=t(c).packageDetails)==null?void 0:i.program_name),1)]),l("tr",null,[nt,dt,l("td",null,g(((r=t(c).packageDetails)==null?void 0:r.package_type)+" - "+((y=t(c).packageDetails)==null?void 0:y.package_name)),1)]),l("tr",null,[rt,ut,l("td",null,[l("ol",ct,[l("li",null,g((N=t(c).packageDetails)==null?void 0:N.pic_name),1)])])]),l("tr",null,[mt,_t,l("td",null,g((P=t(c).packageDetails)==null?void 0:P.tutormentor_name),1)]),l("tr",null,[pt,ft,l("td",null,g(t(I)().format("LLL")),1)])])]}),_:1})]),_:1}),e(w,{md:"5"},{default:s(()=>[e(R,{color:"#16B1FF",class:"mb-2 d-flex align-center"},{default:s(()=>[l("div",null,[e(le,null,{default:s(()=>[e(W,{class:"text-white"},{default:s(()=>[M(" Total Minutes of Package ")]),_:1})]),_:1}),e(j,{class:"d-flex justify-between"},{default:s(()=>{var i;return[l("div",vt,[l("h1",yt,g((i=t(c).packageDetails)==null?void 0:i.duration_in_minutes),1),gt])]}),_:1})]),e(j,null,{default:s(()=>[l("div",ht,[e(x,{icon:"ri-calendar-schedule-line",size:"60"})])]),_:1})]),_:1}),e(R,{color:"#91c45e",class:"mb-2 d-flex align-center"},{default:s(()=>[l("div",null,[e(le,null,{default:s(()=>[e(W,{class:"text-white"},{default:s(()=>[M(" Total Minutes Spent ")]),_:1})]),_:1}),e(j,{class:"d-flex justify-between"},{default:s(()=>{var i;return[l("div",Vt,[l("h1",bt,g((i=t(c).packageDetails)==null?void 0:i.time_spent_in_minutes),1),kt])]}),_:1})]),e(j,null,{default:s(()=>[l("div",wt,[e(x,{icon:"ri-timer-flash-line",size:"60",color:"white"})])]),_:1})]),_:1}),e(R,{color:"#e05e5e",class:"mb-2 d-flex align-center"},{default:s(()=>[l("div",null,[e(le,null,{default:s(()=>[e(W,{class:"text-white"},{default:s(()=>[M(" Total Minutes Left ")]),_:1})]),_:1}),e(j,{class:"d-flex justify-between"},{default:s(()=>{var i,r;return[l("div",xt,[l("h1",Dt,g(((i=t(c).packageDetails)==null?void 0:i.duration_in_minutes)-((r=t(c).packageDetails)==null?void 0:r.time_spent_in_minutes)),1),Ct])]}),_:1})]),e(j,null,{default:s(()=>[l("div",$t,[e(x,{icon:"ri-timer-2-line",size:"60"})])]),_:1})]),_:1})]),_:1})]),_:1}))]),_:1}),e(J,{modelValue:t(d).edit,"onUpdate:modelValue":a[5]||(a[5]=i=>t(d).edit=i),"max-width":"600",persistent:""},{default:s(()=>{var i;return[e(qe,{item:t(c).editableColumns,package_id:(i=t(c).packageDetails)==null?void 0:i.package_id,id:h.id,onClose:a[3]||(a[3]=r=>_("edit")),onReload:a[4]||(a[4]=r=>C(h.id))},null,8,["item","package_id","id"])]}),_:1},8,["modelValue"]),e(J,{modelValue:t(d).delete,"onUpdate:modelValue":a[7]||(a[7]=i=>t(d).delete=i),"max-width":"400",persistent:""},{default:s(()=>[e(ge,{title:"timesheet",onDelete:m,onClose:a[6]||(a[6]=i=>_("delete"))})]),_:1},8,["modelValue"])]),_:1})}}},Zt={__name:"timesheet-detail",props:{id:Number},setup(L){const V=L.id,o=k(!1);return ye("reloadData",o),ye("updateReload",c=>{o.value=c}),(c,d)=>(D(),q(re,null,[e(Mt,{id:t(V)},null,8,["id"]),e(Ie,{id:t(V)},null,8,["id"])],64))}};export{Zt as default};
